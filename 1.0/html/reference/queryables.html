
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>asq.queryables &mdash; asq v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="asq v1.0 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="reference.html" />
    <link rel="next" title="asq.selectors" href="selectors.html" />
    <link rel="prev" title="asq.initiators" href="initiators.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="selectors.html" title="asq.selectors"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="initiators.html" title="asq.initiators"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">asq v1.0 documentation</a> &raquo;</li>
          <li><a href="reference.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-asq.queryables">
<span id="asq-queryables"></span><h1><tt class="docutils literal"><span class="pre">asq.queryables</span></tt><a class="headerlink" href="#module-asq.queryables" title="Permalink to this headline">¶</a></h1>
<p>Classes which support the queryable interface.</p>
<div class="section" id="asq-queryables-queryable">
<h2><tt class="docutils literal"><span class="pre">asq.queryables.Queryable</span></tt><a class="headerlink" href="#asq-queryables-queryable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="asq.queryables.Queryable">
<em class="property">class </em><tt class="descclassname">asq.queryables.</tt><tt class="descname">Queryable</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries over iterables executed serially.</p>
<p>Queryable objects are constructed from iterables.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__contains__" title="asq.queryables.Queryable.__contains__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__contains__</span></tt></a></td>
<td>Support for membership testing using the &#8216;in&#8217; operator.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__enter__" title="asq.queryables.Queryable.__enter__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__enter__</span></tt></a></td>
<td>Support for the context manager protocol.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__eq__" title="asq.queryables.Queryable.__eq__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__eq__</span></tt></a></td>
<td>Determine value equality with another iterable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__exit__" title="asq.queryables.Queryable.__exit__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__exit__</span></tt></a></td>
<td>Support for the context manager protocol.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__getitem__" title="asq.queryables.Queryable.__getitem__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__getitem__</span></tt></a></td>
<td>Support for indexing into the sequence using square brackets.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__init__" title="asq.queryables.Queryable.__init__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__init__</span></tt></a></td>
<td>Construct a Queryable from any iterable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__iter__" title="asq.queryables.Queryable.__iter__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__iter__</span></tt></a></td>
<td>Support for the iterator protocol.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__ne__" title="asq.queryables.Queryable.__ne__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__ne__</span></tt></a></td>
<td>Determine value inequality with another iterable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__reversed__" title="asq.queryables.Queryable.__reversed__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__reversed__</span></tt></a></td>
<td>Support for sequence reversal using the reversed() built-in.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__repr__" title="asq.queryables.Queryable.__repr__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__repr__</span></tt></a></td>
<td>Returns a stringified representation of the Queryable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.__str__" title="asq.queryables.Queryable.__str__"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.__str__</span></tt></a></td>
<td>Returns a stringified representation of the Queryable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.aggregate" title="asq.queryables.Queryable.aggregate"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.aggregate</span></tt></a></td>
<td>Apply a function over a sequence to produce a single result.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.all" title="asq.queryables.Queryable.all"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.all</span></tt></a></td>
<td>Determine if all elements in the source sequence satisfy a condition.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.any" title="asq.queryables.Queryable.any"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.any</span></tt></a></td>
<td>Determine if the source sequence contains any elements which satisfy the predicate.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.as_parallel" title="asq.queryables.Queryable.as_parallel"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.as_parallel</span></tt></a></td>
<td>Return a ParallelQueryable for parallel execution of queries.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.average" title="asq.queryables.Queryable.average"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.average</span></tt></a></td>
<td>Return the arithmetic mean of the values in the sequence..</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.close" title="asq.queryables.Queryable.close"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.close</span></tt></a></td>
<td>Closes the queryable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.closed" title="asq.queryables.Queryable.closed"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.closed</span></tt></a></td>
<td>Determine whether the Queryable has been closed.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.concat" title="asq.queryables.Queryable.concat"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.concat</span></tt></a></td>
<td>Concatenates two sequences.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.contains" title="asq.queryables.Queryable.contains"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.contains</span></tt></a></td>
<td>Determines whether the sequence contains a particular value.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.count" title="asq.queryables.Queryable.count"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.count</span></tt></a></td>
<td>Return the number of elements (which match an optional predicate).</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.default_if_empty" title="asq.queryables.Queryable.default_if_empty"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.default_if_empty</span></tt></a></td>
<td>If the source sequence is empty return a single element sequence containing the supplied default value, otherwise return the source sequence unchanged.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.difference" title="asq.queryables.Queryable.difference"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.difference</span></tt></a></td>
<td>Returns those elements which are in the source sequence which are not in the second_iterable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.distinct" title="asq.queryables.Queryable.distinct"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.distinct</span></tt></a></td>
<td>Eliminate duplicate elements from a sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.element_at" title="asq.queryables.Queryable.element_at"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.element_at</span></tt></a></td>
<td>Return the element at ordinal index.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.first" title="asq.queryables.Queryable.first"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.first</span></tt></a></td>
<td>The first element in a sequence (optionally satisfying a predicate).</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.first_or_default" title="asq.queryables.Queryable.first_or_default"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.first_or_default</span></tt></a></td>
<td>The first element (optionally satisfying a predicate) or a default.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.group_by" title="asq.queryables.Queryable.group_by"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.group_by</span></tt></a></td>
<td>Groups the elements according to the value of a key extracted by a selector function.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.group_join" title="asq.queryables.Queryable.group_join"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.group_join</span></tt></a></td>
<td>Match elements of two sequences using keys and group the results.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.intersect" title="asq.queryables.Queryable.intersect"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.intersect</span></tt></a></td>
<td>Returns those elements which are both in the source sequence and in the second_iterable.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.join" title="asq.queryables.Queryable.join"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.join</span></tt></a></td>
<td>Perform an inner join with a second sequence using selected keys.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.last" title="asq.queryables.Queryable.last"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.last</span></tt></a></td>
<td>The last element in a sequence (optionally satisfying a predicate).</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.last_or_default" title="asq.queryables.Queryable.last_or_default"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.last_or_default</span></tt></a></td>
<td>The last element (optionally satisfying a predicate) or a default.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.log" title="asq.queryables.Queryable.log"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.log</span></tt></a></td>
<td>Log query result consumption details to a logger.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.max" title="asq.queryables.Queryable.max"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.max</span></tt></a></td>
<td>Return the maximum value in a sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.min" title="asq.queryables.Queryable.min"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.min</span></tt></a></td>
<td>Return the minimum value in a sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.of_type" title="asq.queryables.Queryable.of_type"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.of_type</span></tt></a></td>
<td>Filters elements according to whether they are of a certain type.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.order_by" title="asq.queryables.Queryable.order_by"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.order_by</span></tt></a></td>
<td>Sorts by a key in ascending order.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.order_by_descending" title="asq.queryables.Queryable.order_by_descending"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.order_by_descending</span></tt></a></td>
<td>Sorts by a key in descending order.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.select" title="asq.queryables.Queryable.select"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.select</span></tt></a></td>
<td>Transforms each element of a sequence into a new form.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.select_many" title="asq.queryables.Queryable.select_many"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.select_many</span></tt></a></td>
<td>Projects each element of a sequence to an intermediate new sequence, flattens the resulting sequences into one sequence and optionally transforms the flattened sequence using a selector function.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.select_many_with_correspondence" title="asq.queryables.Queryable.select_many_with_correspondence"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.select_many_with_correspondence</span></tt></a></td>
<td>Projects each element of a sequence to an intermediate new sequence, and flattens the resulting sequence, into one sequence and uses a selector function to incorporate the corresponding source for each item in the result sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.select_many_with_index" title="asq.queryables.Queryable.select_many_with_index"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.select_many_with_index</span></tt></a></td>
<td>Projects each element of a sequence to an intermediate new sequence, incorporating the index of the element, flattens the resulting sequence into one sequence and optionally transforms the flattened sequence using a selector function.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.select_with_index" title="asq.queryables.Queryable.select_with_index"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.select_with_index</span></tt></a></td>
<td>Transforms each element of a sequence into a new form, incorporating the index of the element.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.sequence_equal" title="asq.queryables.Queryable.sequence_equal"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.sequence_equal</span></tt></a></td>
<td>Determine whether two sequences are equal by elementwise comparison.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.single" title="asq.queryables.Queryable.single"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.single</span></tt></a></td>
<td>The only element (which satisfies a condition).</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.single_or_default" title="asq.queryables.Queryable.single_or_default"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.single_or_default</span></tt></a></td>
<td>The only element (which satisfies a condition) or a default.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.skip" title="asq.queryables.Queryable.skip"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.skip</span></tt></a></td>
<td>Skip the first count contiguous elements of the source sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.skip_while" title="asq.queryables.Queryable.skip_while"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.skip_while</span></tt></a></td>
<td>Omit elements from the start for which a predicate is True.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.sum" title="asq.queryables.Queryable.sum"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.sum</span></tt></a></td>
<td>Return the arithmetic sum of the values in the sequence..</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.take" title="asq.queryables.Queryable.take"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.take</span></tt></a></td>
<td>Returns a specified number of elements from the start of a sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.take_while" title="asq.queryables.Queryable.take_while"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.take_while</span></tt></a></td>
<td>Returns elements from the start while the predicate is True.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_dictionary" title="asq.queryables.Queryable.to_dictionary"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_dictionary</span></tt></a></td>
<td>Build a dictionary from the source sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_list" title="asq.queryables.Queryable.to_list"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_list</span></tt></a></td>
<td>Convert the source sequence to a list.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_lookup" title="asq.queryables.Queryable.to_lookup"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_lookup</span></tt></a></td>
<td>Returns a Lookup object, using the provided selector to generate a</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_set" title="asq.queryables.Queryable.to_set"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_set</span></tt></a></td>
<td>Convert the source sequence to a set.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_str" title="asq.queryables.Queryable.to_str"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_str</span></tt></a></td>
<td>Build a string from the source sequence.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.to_tuple" title="asq.queryables.Queryable.to_tuple"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.to_tuple</span></tt></a></td>
<td>Convert the source sequence to a tuple.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.union" title="asq.queryables.Queryable.union"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.union</span></tt></a></td>
<td>Returns those elements which are either in the source sequence or in the second_iterable, or in both.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.where" title="asq.queryables.Queryable.where"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.where</span></tt></a></td>
<td>Filters elements according to whether they match a predicate.</td>
</tr>
<tr><td><a class="reference internal" href="#asq.queryables.Queryable.zip" title="asq.queryables.Queryable.zip"><tt class="xref py py-obj docutils literal"><span class="pre">Queryable.zip</span></tt></a></td>
<td>Elementwise combination of two sequences.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="asq.queryables.Queryable.__contains__">
<tt class="descname">__contains__</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for membership testing using the &#8216;in&#8217; operator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> &#8211; The item for which to test membership.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if item is in the sequence, otherwise False.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A chainable query operator called <tt class="docutils literal"><span class="pre">contains()</span></tt> (no underscores)
is also provided.</p>
</div>
<p class="rubric">Example</p>
<p>Test whether 49 is one of the squares of two, seven or nine:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">49</span> <span class="ow">in</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__enter__">
<tt class="descname">__enter__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the context manager protocol.</p>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__eq__">
<tt class="descname">__eq__</tt><big>(</big><em>rjs</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine value equality with another iterable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rhs</strong> &#8211; Any iterable collection.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the sequences are equal in value, otherwise False.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This in the infix operator equivalent of the sequence_equal()
query operator.</p>
</div>
<p class="rubric">Examples</p>
<p>Test whether a sequence is equal to a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__exit__">
<tt class="descname">__exit__</tt><big>(</big><em>type</em>, <em>value</em>, <em>traceback</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__exit__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the context manager protocol.</p>
<p>Ensures that close() is called on the Queryable.</p>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__getitem__">
<tt class="descname">__getitem__</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for indexing into the sequence using square brackets.</p>
<p>Equivalent to element_at().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>index</strong> &#8211; The index should be between zero and count() - 1 inclusive.
Negative indices are not interpreted in the same way they are
for built-in lists, and are considered out-of-range.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the element at offset index into the sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>IndexError - If the index is out-of-range.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A chainable query operator called <tt class="docutils literal"><span class="pre">element_at()</span></tt> is also
provided.</p>
</div>
<p class="rubric">Examples</p>
<p>Retrieve the fourth element of a greater than six:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
<span class="go">11</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__init__">
<tt class="descname">__init__</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Queryable from any iterable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>iterable</strong> &#8211; Any object supporting the iterator protocol.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">TypeError - if iterable does not support the iterator protocol.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Initialise a queryable from a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">queryable</span> <span class="o">=</span> <span class="n">Queryable</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">query(iterable)</span></tt> initiator should normally be used in
preference to calling the <tt class="docutils literal"><span class="pre">Queryable</span></tt> constructor directly.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__iter__">
<tt class="descname">__iter__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the iterator protocol.</p>
<p>Allows Queryable instances to be used anywhere an iterable is required.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">An iterator over the values in the query result.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable has been closed().</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method should not usually be called directly; use the
<tt class="docutils literal"><span class="pre">iter()</span></tt> built-in or other Python constructs which check for the
presence of <tt class="docutils literal"><span class="pre">__iter__()</span></tt>, such as <tt class="docutils literal"><span class="pre">for</span></tt> loops.</p>
</div>
<p class="rubric">Examples</p>
<p>Call <tt class="docutils literal"><span class="pre">__iter__()</span></tt> indirectly through the <tt class="docutils literal"><span class="pre">iter()</span></tt> built-in to
obtain an iterator over the query results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
<span class="go">StopIteration</span>
</pre></div>
</div>
<p>Call <tt class="docutils literal"><span class="pre">__iter__()</span></tt> indirectly by using a <tt class="docutils literal"><span class="pre">for</span></tt> loop:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">1</span>
<span class="go">9</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__ne__">
<tt class="descname">__ne__</tt><big>(</big><em>rjs</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine value inequality with another iterable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rhs</strong> &#8211; Any iterable collection.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the sequences are inequal in value, otherwise False.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Test whether a sequence is not equal to a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="n">expected</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__reversed__">
<tt class="descname">__reversed__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__reversed__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for sequence reversal using the reversed() built-in.</p>
<p>Called by reversed() to implement reverse iteration.</p>
<p>Equivalent to the reverse() method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A Queryable over the reversed sequence.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable is closed().</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A chainable query operator called <tt class="docutils literal"><span class="pre">reverse()</span></tt> is also
provided.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method should not usually be called directly; use the
<tt class="docutils literal"><span class="pre">reversed()</span></tt> built-in or other Python constructs which check for
the presence of <tt class="docutils literal"><span class="pre">__reversed__()</span></tt>.</p>
</div>
<p class="rubric">Example</p>
<p>Create a reverse iterator over a queryable for use with a <tt class="docutils literal"><span class="pre">for</span></tt>
loop:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">9</span>
<span class="go">3</span>
<span class="go">7</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__repr__">
<tt class="descname">__repr__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a stringified representation of the Queryable.</p>
<p>The string will <em>not</em> necessarily contain the sequence data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A stringified representation of the Queryable.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method should not usually be called directly; use the
<tt class="docutils literal"><span class="pre">str()</span></tt> built-in or other Python constructs which check for the
presence of __str__ such as string interpolation functions.</p>
</div>
<p>Provide a string representation of the  Queryable using the <tt class="docutils literal"><span class="pre">repr()</span></tt>
built-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">&#39;Queryable([9, 7, 8])&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.__str__">
<tt class="descname">__str__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a stringified representation of the Queryable.</p>
<p>The string <em>will</em> necessarily contain the sequence data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A stringified representation of the Queryable.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method should not usually be called directly; use the
<tt class="docutils literal"><span class="pre">str()</span></tt> built-in or other Python constructs which check for the
presence of __str__ such as string interpolation functions.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to convert the Queryable sequence to a string based on the
element values, consider using the <tt class="docutils literal"><span class="pre">to_str()</span></tt> method.</p>
</div>
<p class="rubric">Example</p>
<p>Convert the Queryable to a string using the <tt class="docutils literal"><span class="pre">str()</span></tt> built-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
<span class="go">&#39;Queryable([9, 7, 8])&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.aggregate">
<tt class="descname">aggregate</tt><big>(</big><em>reducer</em>, <em>seed=sentinel</em>, <em>result_selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function over a sequence to produce a single result.</p>
<p>Apply a binary function cumulatively to the elements of the source
sequence so as to reduce the iterable to a single value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reducer</strong> &#8211; A binary function the first positional argument of which
is an accumulated value and the second is the update value from
the source sequence. The return value should be the new
accumulated value after the update value has been incorporated.</li>
<li><strong>seed</strong> &#8211; An optional value used to initialise the accumulator before
iteration over the source sequence. If seed is omitted the
and the source sequence contains only one item, then that item
is returned.</li>
<li><strong>result_selector</strong> &#8211; An optional unary function applied to the final
accumulator value to produce the result. If omitted, defaults
to the identity function.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If called on an empty sequence with no seed value.</li>
<li>TypeError - If reducer is not callable.</li>
<li>TypeError - If result_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Compute the product of a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="k">lambda</span> <span class="n">accumulator</span><span class="p">,</span> <span class="n">update</span><span class="p">:</span> <span class="n">accumulator</span> <span class="o">*</span> <span class="n">update</span><span class="p">)</span>
<span class="go">1512</span>
</pre></div>
</div>
<p>Concatenate strings to an initial seed value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cheeses</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Cheddar&#39;</span><span class="p">,</span> <span class="s">&#39;Stilton&#39;</span><span class="p">,</span> <span class="s">&#39;Cheshire&#39;</span><span class="p">,</span> <span class="s">&#39;Beaufort&#39;</span><span class="p">,</span> <span class="s">&#39;Brie&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">cheeses</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">u</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="s">&quot;Cheeses:&quot;</span><span class="p">)</span>
<span class="go">&#39;Cheeses: Cheddar Stilton Cheshire Beaufort Brie&#39;</span>
</pre></div>
</div>
<p>Concatenate text fragments using <tt class="docutils literal"><span class="pre">operator.add()</span></tt> and return the
number of words:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fragments</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;The quick &#39;</span><span class="p">,</span> <span class="s">&#39;brown &#39;</span><span class="p">,</span> <span class="s">&#39;fox jumped over &#39;</span><span class="p">,</span> <span class="s">&#39;the &#39;</span><span class="p">,</span> <span class="s">&#39;lazy dog.&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">fragments</span><span class="p">)</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">result</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.all">
<tt class="descname">all</tt><big>(</big><em>predicate=bool</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if all elements in the source sequence satisfy a condition.</p>
<p>All of the source sequence will be consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> (<em>callable</em>) &#8211; An optional single argument function used to
test each elements. If omitted, the bool() function is used
resulting in the elements being tested directly.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if all elements in the sequence meet the predicate condition,
otherwise False.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed()</li>
<li>TypeError - If predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Determine whether all values evaluate to True in a boolean context:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&quot;camel&quot;</span><span class="p">,</span> <span class="mf">3.142</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">objects</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Check that all numbers are divisible by 13:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">260</span><span class="p">,</span> <span class="mi">273</span><span class="p">,</span> <span class="mi">286</span><span class="p">,</span> <span class="mi">299</span><span class="p">,</span> <span class="mi">312</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">338</span><span class="p">,</span> <span class="mi">351</span><span class="p">,</span> <span class="mi">364</span><span class="p">,</span> <span class="mi">377</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">13</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.any">
<tt class="descname">any</tt><big>(</big><em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.any" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if the source sequence contains any elements which satisfy
the predicate.</p>
<p>Only enough of the sequence to satisfy the predicate once is consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>predicate</strong> &#8211; An optional single argument function used to test each
element. If omitted, or None, this method returns True if there
is at least one element in the source.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the sequence contains at least one element which satisfies
the predicate, otherwise False.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable is closed()</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Determine whether the sequence contains any items:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">items</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Determine whether the sequence contains any items which are a multiple
of 13:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">98</span><span class="p">,</span> <span class="mi">458</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">876</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">325</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">13</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.as_parallel">
<tt class="descname">as_parallel</tt><big>(</big><em>pool=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.as_parallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a ParallelQueryable for parallel execution of queries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Warning :</th><td class="field-body">This feature should be considered experimental alpha quality.</td>
</tr>
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pool</strong> &#8211; An optional multiprocessing pool which will provide execution
resources for parellel processing.  If omitted, a pool will be
created if necessary and managed internally.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A ParallelQueryable on which all the standard query operators may
be called.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.average">
<tt class="descname">average</tt><big>(</big><em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.average" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the arithmetic mean of the values in the sequence..</p>
<p>All of the source sequence will be consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; An optional single argument function which will be used
to project the elements of the sequence. If omitted, the
identity function is used.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The arithmetic mean value of the projected sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>ValueError - I the source sequence is empty.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Compute the average of some numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">98</span><span class="p">,</span> <span class="mi">458</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">876</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">325</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">average</span><span class="p">()</span>
<span class="go">258.57142857142856</span>
</pre></div>
</div>
<p>Compute the mean square of a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">98</span><span class="p">,</span> <span class="mi">458</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">876</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">325</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="go">156231.14285714287</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the queryable.</p>
<p>The Queryable should not be used following a call to close. This method
is idempotent. Other calls to a Queryable following close() will raise
ValueError.</p>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.closed">
<tt class="descname">closed</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether the Queryable has been closed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if closed, otherwise False.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.concat">
<tt class="descname">concat</tt><big>(</big><em>second_iterable</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenates two sequences.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>second_iterable</strong> &#8211; The sequence to concatenate on to the sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over the concatenated sequences.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>TypeError - If second_iterable is not in fact iterable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Concatenate two sequences of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="mi">98</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 45, 23, 34, 98, 23, 23, 12]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.contains">
<tt class="descname">contains</tt><big>(</big><em>value</em>, <em>equality_comparer=operator.eq</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether the sequence contains a particular value.</p>
<p>Execution is immediate. Depending on the type of the sequence, all or
none of the sequence may be consumed by this operation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> &#8211; The value to test for membership of the sequence</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if value is in the sequence, otherwise False.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable has been closed.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Check whether a sentence contains a particular word:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;man&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;plan&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;canal&#39;</span><span class="p">,</span> <span class="s">&#39;Panama&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">words</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;plan&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Check whether a sentence contains a particular word with a case-
insensitive check:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;man&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;plan&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;canal&#39;</span><span class="p">,</span> <span class="s">&#39;Panama&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">words</span><span class="p">)</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;panama&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="k">lambda</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">lhs</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.count">
<tt class="descname">count</tt><big>(</big><em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of elements (which match an optional predicate).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; An optional unary predicate function used to identify
elements which will be counted. The single positional argument
of the function is the element value. The function should
return True or False.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The number of elements in the sequence if the predicate is None
(the default), or if the predicate is supplied the number of
elements for which the predicate evaluates to True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>TypeError - If predicate is neither None nor a callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Count the number of elements in a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Sheila&#39;</span><span class="p">,</span> <span class="s">&#39;Jim&#39;</span><span class="p">,</span> <span class="s">&#39;Fred&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">people</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Count the number of names containing the letter &#8216;i&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Sheila&#39;</span><span class="p">,</span> <span class="s">&#39;Jim&#39;</span><span class="p">,</span> <span class="s">&#39;Fred&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">people</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.default_if_empty">
<tt class="descname">default_if_empty</tt><big>(</big><em>default</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.default_if_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>If the source sequence is empty return a single element sequence
containing the supplied default value, otherwise return the source
sequence unchanged.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> &#8211; The element to be returned if the source sequence is empty.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The source sequence, or if the source sequence is empty an sequence
containing a single element with the supplied default value.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable has been closed.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>An empty sequence triggering the default return:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">default_if_empty</span><span class="p">(</span><span class="mi">97</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[97]</span>
</pre></div>
</div>
<p>A non-empty sequence passing through:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">default_if_empty</span><span class="p">(</span><span class="mi">97</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[70, 45, 34]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.difference">
<tt class="descname">difference</tt><big>(</big><em>second_iterable</em>, <em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.difference" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns those elements which are in the source sequence which are not
in the second_iterable.</p>
<p>This method is equivalent to the Except() LINQ operator, renamed to a
valid Python identifier.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution, but as soon as execution
commences the entirety of the second_iterable is consumed;
therefore, although the source sequence may be infinite the
second_iterable must be finite.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>second_iterable</strong> &#8211; Elements from this sequence are excluded from the
returned sequence. This sequence will be consumed in its
entirety, so must be finite.</li>
<li><strong>selector</strong> &#8211; A optional single argument function with selects from the
elements of both sequences the values which will be
compared for equality. If omitted the identity function will
be used.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A sequence containing all elements in the source sequence except
those which are also members of the second sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>TypeError - If the second_iterable is not in fact iterable.</li>
<li>TypeError - If the selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Numbers in the first list which are not in the second list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[0, 2, 4, 6, 9]</span>
</pre></div>
</div>
<p>Countries in the first list which are not in the second list, compared
in a case-insensitive manner:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;UK&#39;</span><span class="p">,</span> <span class="s">&#39;Canada&#39;</span><span class="p">,</span> <span class="s">&#39;qatar&#39;</span><span class="p">,</span> <span class="s">&#39;china&#39;</span><span class="p">,</span> <span class="s">&#39;New Zealand&#39;</span><span class="p">,</span> <span class="s">&#39;Iceland&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;iceland&#39;</span><span class="p">,</span> <span class="s">&#39;CANADA&#39;</span><span class="p">,</span> <span class="s">&#39;uk&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;qatar&#39;, &#39;china&#39;, &#39;New Zealand&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.distinct">
<tt class="descname">distinct</tt><big>(</big><em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Eliminate duplicate elements from a sequence.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; An optional single argument function the result of which
is the value compared for uniqueness against elements already
consumed. If omitted, the element value itself is compared for
uniqueness.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Unique elements of the source sequence as determined by the
selector function.  Note that it is unprojected elements that are
returned, even if a selector was provided.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Remove duplicate numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[0, 2, 4, 5, 6, 8, 9, 1, 3, 7]</span>
</pre></div>
</div>
<p>A sequence such that no two numbers in the result have digits which
sum to the same value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sum_of_digits</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span><span class="n">sum_of_digits</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[10, 34, 56, 11, 89]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.element_at">
<tt class="descname">element_at</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.element_at" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element at ordinal index.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>index</strong> &#8211; The index of the element to be returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The element at ordinal index in the source sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>ValueError - If index is out of range.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Retrieve the fifth element from a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">element_at</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">89</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.first">
<tt class="descname">first</tt><big>(</big><em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.first" title="Permalink to this definition">¶</a></dt>
<dd><p>The first element in a sequence (optionally satisfying a predicate).</p>
<p>If the predicate is omitted or is None this query returns the first
element in the sequence; otherwise, it returns the first element in
the sequence for which the predicate evaluates to True. Exceptions are
raised if there is no such element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the first element of the source sequence will
be returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The first element of the sequence if predicate is None, otherwise
the first element for which the predicate returns True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>ValueError - If the source sequence is empty.</li>
<li>ValueError - If there are no elements matching the predicate.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Retrieve the first element of a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="go">10</span>
</pre></div>
</div>
<p>Retrieve the first element of a sequence divisible by seven:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">56</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.first_or_default">
<tt class="descname">first_or_default</tt><big>(</big><em>default</em>, <em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.first_or_default" title="Permalink to this definition">¶</a></dt>
<dd><p>The first element (optionally satisfying a predicate) or a default.</p>
<p>If the predicate is omitted or is None this query returns the first
element in the sequence; otherwise, it returns the first element in
the sequence for which the predicate evaluates to True. If there is no
such element the value of the default argument is returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> &#8211; The value which will be returned if either the sequence is
empty or there are no elements matching the predicate.</li>
<li><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the first element of the source sequence will
be returned.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The first element of the sequence if predicate is None, otherwise
the first element for which the predicate returns True. If there is
no such element, the default argument is returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Retrieve the first element of a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">first_or_default</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
<p>Return the default when called on an empty sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">first_or_default</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="go">17</span>
</pre></div>
</div>
<p>Retrieve the first element of a sequence divisible by eight:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">first_or_default</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">56</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.group_by">
<tt class="descname">group_by</tt><big>(</big><em>key_selector=identity</em>, <em>element_selector=identity</em>, <em>result_selector=lambda key</em>, <em>grouping: grouping</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.group_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Groups the elements according to the value of a key extracted by a
selector function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method has different behaviour to itertools.groupby in the
Python standard library because it aggregates all items with the
same key, rather than returning groups of consecutive items of the
same key.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution, but consumption of a single
result will lead to evaluation of the whole source sequence.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key_selector</strong> &#8211; An optional unary function used to extract a key from
each element in the source sequence. The default is the
identity function.</li>
<li><strong>element_selector</strong> &#8211; A optional unary function to map elements in the
source sequence to elements in a resulting Grouping. The
default is the identity function.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function to create a result
from each group. The first positional argument is the key
identifying the group. The second argument is a Grouping object
containing the members of the group. The default is a function
which simply returns the Grouping.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable sequence of elements of the where each element
represents a group.  If the default result_selector is relied upon
this is a Grouping object.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>TypeError - If key_selector is not callable.</li>
<li>TypeError - If element_selector is not callable.</li>
<li>TypeError - If result_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Group numbers by the remainder when dividing them by five:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span>
<span class="go">[Grouping(key=0), Grouping(key=4), Grouping(key=1),</span>
<span class="go"> Grouping(key=3)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">key</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[10, 25]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">key</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[34, 74, 89]</span>
</pre></div>
</div>
<p>Group people by their nationality of the first name, and place only
the person&#8217;s name in the grouped result:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Joe Bloggs&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Ola Nordmann&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Norwegian&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Harry Holland&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Dutch&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Kari Nordmann&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Norwegian&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Jan Kowalski&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Polish&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Hans Schweizer&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Swiss&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tom Cobbleigh&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tommy Atkins&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">)</span> <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">people</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s">&#39;nationality&#39;</span><span class="p">],</span>
<span class="go">                                  lambda p: p[&#39;name&#39;]).to_list()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span>
<span class="go">[Grouping(key=&#39;British&#39;), Grouping(key=&#39;Norwegian&#39;),</span>
<span class="go"> Grouping(key=&#39;Dutch&#39;), Grouping(key=&#39;Polish&#39;),</span>
<span class="go"> Grouping(key=&#39;Swiss&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Joe Bloggs&#39;, &#39;Tom Cobbleigh&#39;, &#39;Tommy Atkins&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Ola Nordmann&#39;, &#39;Kari Nordmann&#39;]</span>
</pre></div>
</div>
<p>Determine the number of people in each national group by creating
a tuple for each group where the first element is the nationality and
the second element is the number of people of that nationality:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Joe Bloggs&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Ola Nordmann&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Norwegian&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Harry Holland&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Dutch&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Kari Nordmann&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Norwegian&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Jan Kowalski&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Polish&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Hans Schweizer&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;Swiss&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tom Cobbleigh&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tommy Atkins&quot;</span><span class="p">,</span> <span class="n">nationality</span><span class="o">=</span><span class="s">&quot;British&quot;</span><span class="p">)</span> <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">people</span><span class="p">)</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="s">&#39;nationality&#39;</span><span class="p">],</span>
<span class="gp">... </span> <span class="n">result_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">group</span><span class="p">)))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">groups</span>
<span class="go">[(&#39;British&#39;, 3), (&#39;Norwegian&#39;, 2), (&#39;Dutch&#39;, 1), (&#39;Polish&#39;, 1),</span>
<span class="go"> (&#39;Swiss&#39;, 1)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.group_join">
<tt class="descname">group_join</tt><big>(</big><em>inner_iterable</em>, <em>outer_key_selector=identity</em>, <em>inner_key_selector=identity</em>, <em>result_selector=lambda outer</em>, <em>grouping: grouping</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.group_join" title="Permalink to this definition">¶</a></dt>
<dd><p>Match elements of two sequences using keys and group the results.</p>
<p>The group_join() query produces a hierarchical result, with all of the
inner elements in the result grouped against the matching outer
element.</p>
<p>The order of elements from outer is maintained. For each of these the
order of elements from inner is also preserved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inner_iterable</strong> &#8211; The sequence to join with the outer sequence.</li>
<li><strong>outer_key_selector</strong> &#8211; An optional unary function to extract keys from
elements of the outer (source) sequence. The first positional
argument of the function should accept outer elements and the
result value should be the key. If omitted, the identity
function is used.</li>
<li><strong>inner_key_selector</strong> &#8211; An optional  unary function to extract keys
from elements of the inner_iterable. The first positional
argument of the function should accept outer elements and the
result value should be the key.  If omitted, the identity
function is used.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function to create a result
element from an outer element and the Grouping of matching
inner elements. The first positional argument is the outer
elements and the second in the Grouping of inner elements
which match the outer element according to the key selectors
used. If omitted, the result elements will be the Groupings
directly.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over a sequence with one element for each group in the
result as returned by the result_selector. If the default result
selector is used, the result is a sequence of Grouping objects.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>TypeError - If the inner_iterable is not in fact iterable.</li>
<li>TypeError - If the outer_key_selector is not callable.</li>
<li>TypeError - If the inner_key_selector is not callable.</li>
<li>TypeError - If the result_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Correlate players with soccer teams using the team name. Group
the players within those teams such that each element of the
result sequence contains full information about a team and a
collection of players belonging to that team:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">players</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Ferdinand&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Manchester United&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Cole&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Chelsea&quot;</span><span class="p">,</span> <span class="n">fee</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Crouch&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Tottenham Hotspur&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Downing&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Aston Villa&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Lampard&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Chelsea&quot;</span><span class="p">,</span> <span class="n">fee</span><span class="o">=</span><span class="mi">11</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Rooney&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Manchester United&quot;</span><span class="p">),</span>
<span class="gp">... </span>           <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Scholes&quot;</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s">&quot;Manchester United&quot;</span><span class="p">,</span> <span class="n">fee</span><span class="o">=</span><span class="bp">None</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">teams</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Manchester United&quot;</span><span class="p">,</span> <span class="n">ground</span><span class="o">=</span><span class="s">&quot;Old Trafford&quot;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Chelsea&quot;</span><span class="p">,</span> <span class="n">ground</span><span class="o">=</span><span class="s">&quot;Stamford Bridge&quot;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tottenham Hotspur&quot;</span><span class="p">,</span> <span class="n">ground</span><span class="o">=</span><span class="s">&quot;White Hart Lane&quot;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Aston Villa&quot;</span><span class="p">,</span> <span class="n">ground</span><span class="o">=</span><span class="s">&quot;Villa Park&quot;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">teams</span><span class="p">)</span><span class="o">.</span><span class="n">group_join</span><span class="p">(</span><span class="n">players</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">team</span><span class="p">:</span> <span class="n">team</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span>
<span class="gp">... </span>              <span class="k">lambda</span> <span class="n">player</span><span class="p">:</span> <span class="n">player</span><span class="p">[</span><span class="s">&#39;team&#39;</span><span class="p">],</span>
<span class="gp">... </span>              <span class="k">lambda</span> <span class="n">team</span><span class="p">,</span> <span class="n">grouping</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                          <span class="n">ground</span><span class="o">=</span><span class="n">team</span><span class="p">[</span><span class="s">&#39;ground&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                          <span class="n">players</span><span class="o">=</span><span class="n">grouping</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span>
<span class="go">[{&#39;players&#39;: Grouping(key=&#39;Manchester United&#39;), &#39;ground&#39;: &#39;Old Trafford&#39;, &#39;team&#39;: &#39;Manchester United&#39;},</span>
<span class="go"> {&#39;players&#39;: Grouping(key=&#39;Chelsea&#39;), &#39;ground&#39;: &#39;Stamford Bridge&#39;, &#39;team&#39;: &#39;Chelsea&#39;},</span>
<span class="go"> {&#39;players&#39;: Grouping(key=&#39;Tottenham Hotspur&#39;), &#39;ground&#39;: &#39;White Hart Lane&#39;, &#39;team&#39;: &#39;Tottenham Hotspur&#39;},</span>
<span class="go"> {&#39;players&#39;: Grouping(key=&#39;Aston Villa&#39;), &#39;ground&#39;: &#39;Villa Park&#39;, &#39;team&#39;: &#39;Aston Villa&#39;}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;players&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[{&#39;name&#39;: &#39;Ferdinand&#39;, &#39;team&#39;: &#39;Manchester United&#39;},</span>
<span class="go"> {&#39;name&#39;: &#39;Rooney&#39;, &#39;team&#39;: &#39;Manchester United&#39;},</span>
<span class="go"> {&#39;name&#39;: &#39;Scholes&#39;, &#39;team&#39;: &#39;Manchester United&#39;}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.intersect">
<tt class="descname">intersect</tt><big>(</big><em>second_iterable</em>, <em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns those elements which are both in the source sequence and in
the second_iterable.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>second_iterable</strong> &#8211; Elements are returned if they are also in the
sequence.</li>
<li><strong>selector</strong> &#8211; An optional single argument function which is used to
project the elements in the source and second_iterables prior
to comparing them. If omitted the identity function will be
used.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A sequence containing all elements in the source sequence  which
are also members of the second sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>TypeError - If the second_iterable is not in fact iterable.</li>
<li>TypeError - If the selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Find all the numbers common to both lists <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 6, 2]</span>
</pre></div>
</div>
<p>Take those strings from the list <tt class="docutils literal"><span class="pre">a</span></tt> which also occur in list <tt class="docutils literal"><span class="pre">b</span></tt>
when compared in a case-insensitive way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;Pear&quot;</span><span class="p">,</span> <span class="s">&quot;Banana&quot;</span><span class="p">,</span> <span class="s">&quot;Orange&quot;</span><span class="p">,</span> <span class="s">&quot;Strawberry&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;PEAR&quot;</span><span class="p">,</span> <span class="s">&quot;ORANGE&quot;</span><span class="p">,</span> <span class="s">&quot;BANANA&quot;</span><span class="p">,</span> <span class="s">&quot;RASPBERRY&quot;</span><span class="p">,</span> <span class="s">&quot;BLUEBERRY&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Pear&#39;, &#39;Banana&#39;, &#39;Orange&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.join">
<tt class="descname">join</tt><big>(</big><em>inner_iterable</em>, <em>outer_key_selector=identity</em>, <em>inner_key_selector=identity</em>, <em>result_selector=lambda outer</em>, <em>inner: (outer</em>, <em>inner)</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an inner join with a second sequence using selected keys.</p>
<p>The order of elements from outer is maintained. For each of these the
order of elements from inner is also preserved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inner_iterable</strong> &#8211; The sequence to join with the outer sequence.</li>
<li><strong>outer_key_selector</strong> &#8211; An optional unary function to extract keys from
elements of the outer (source) sequence. The first positional
argument of the function should accept outer elements and the
result value should be the key. If omitted, the identity
function is used.</li>
<li><strong>inner_key_selector</strong> &#8211; An optional  unary function to extract keys
from elements of the inner_iterable. The first positional
argument of the function should accept outer elements and the
result value should be the key.  If omitted, the identity
function is used.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function to create a result
element from two matching elements of the outer and inner. If
omitted the result elements will be a 2-tuple pair of the
matching outer and inner elements.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable whose elements are the result of performing an inner-
join on two sequences.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>TypeError - If the inner_iterable is not in fact iterable.</li>
<li>TypeError - If the outer_key_selector is not callable.</li>
<li>TypeError - If the inner_key_selector is not callable.</li>
<li>TypeError - If the result_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Correlate pets with their owners, producing pairs of pet and owner
date for each result:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">people</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Minnie&#39;</span><span class="p">,</span> <span class="s">&#39;Dennis&#39;</span><span class="p">,</span> <span class="s">&#39;Roger&#39;</span><span class="p">,</span> <span class="s">&#39;Beryl&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pets</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Chester&#39;</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="s">&#39;Minnie&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Gnasher&#39;</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="s">&#39;Dennis&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Dodge&#39;</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="s">&#39;Roger&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Pearl&#39;</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="s">&#39;Beryl&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">pets</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">people</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">pet</span><span class="p">:</span> <span class="n">pet</span><span class="p">[</span><span class="s">&#39;owner&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[({&#39;owner&#39;: &#39;Minnie&#39;, &#39;name&#39;: &#39;Chester&#39;}, &#39;Minnie&#39;),</span>
<span class="go"> ({&#39;owner&#39;: &#39;Dennis&#39;, &#39;name&#39;: &#39;Gnasher&#39;}, &#39;Dennis&#39;),</span>
<span class="go"> ({&#39;owner&#39;: &#39;Roger&#39;, &#39;name&#39;: &#39;Dodge&#39;}, &#39;Roger&#39;),</span>
<span class="go"> ({&#39;owner&#39;: &#39;Beryl&#39;, &#39;name&#39;: &#39;Pearl&#39;}, &#39;Beryl&#39;)]</span>
</pre></div>
</div>
<p>or correlate owners with pets, producing more refined results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">people</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pets</span><span class="p">,</span> <span class="n">inner_key_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pet</span><span class="p">:</span> <span class="n">pet</span><span class="p">[</span><span class="s">&#39;owner&#39;</span><span class="p">],</span>
<span class="gp">... </span>  <span class="n">result_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">person</span><span class="p">,</span> <span class="n">pet</span><span class="p">:</span> <span class="n">pet</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot; is owned by &quot;</span> <span class="o">+</span> <span class="n">person</span><span class="p">)</span> \
<span class="gp">... </span>  <span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Chester is owned by Minnie&#39;,</span>
<span class="go"> &#39;Gnasher is owned by Dennis&#39;,</span>
<span class="go"> &#39;Dodge is owned by Roger&#39;,</span>
<span class="go"> &#39;Pearl is owned by Beryl&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.last">
<tt class="descname">last</tt><big>(</big><em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.last" title="Permalink to this definition">¶</a></dt>
<dd><p>The last element in a sequence (optionally satisfying a predicate).</p>
<p>If the predicate is omitted or is None this query returns the last
element in the sequence; otherwise, it returns the last element in
the sequence for which the predicate evaluates to True. Exceptions are
raised if there is no such element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the last element of the source sequence will
be returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The last element of the sequence if predicate is None, otherwise
the last element for which the predicate returns True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>ValueError - If the source sequence is empty.</li>
<li>ValueError - If there are no elements matching the predicate.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the last number in this sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="go">34</span>
</pre></div>
</div>
<p>Return the last number under 30 in this sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">)</span>
<span class="go">23</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.last_or_default">
<tt class="descname">last_or_default</tt><big>(</big><em>default</em>, <em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.last_or_default" title="Permalink to this definition">¶</a></dt>
<dd><p>The last element (optionally satisfying a predicate) or a default.</p>
<p>If the predicate is omitted or is None this query returns the last
element in the sequence; otherwise, it returns the last element in
the sequence for which the predicate evaluates to True. If there is no
such element the value of the default argument is returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> &#8211; The value which will be returned if either the sequence is
empty or there are no elements matching the predicate.</li>
<li><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the last element of the source sequence will
be returned.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The last element of the sequence if predicate is None, otherwise
the last element for which the predicate returns True. If there is
no such element, the default argument is returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the last number in this sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="go">34</span>
</pre></div>
</div>
<p>Return the last number under 30 in this sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">)</span>
<span class="go">23</span>
</pre></div>
</div>
<p>Trigger return of the default using a sequence with no values which
satisfy the predicate:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last_or_default</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span>
<span class="go">100</span>
</pre></div>
</div>
<p>Trigger return of the default using an empty sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">last_or_default</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="go">37</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.log">
<tt class="descname">log</tt><big>(</big><em>logger=None</em>, <em>label=None</em>, <em>eager=False</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Log query result consumption details to a logger.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>logger</strong> &#8211; Any object which supports a debug() method which accepts a
str, such as a Python standard library logger object from the
logging module.  If logger is not provided or is None, this
method has no logging side effects.</li>
<li><strong>label</strong> &#8211; An optional label which will be inserted into each line of
logging output produced by this particular use of log</li>
<li><strong>eager</strong> &#8211; An optional boolean which controls how the query result will
be consumed.  If True, the sequence will be consumed and logged
in its entirety. If False (the default) the sequence will be
evaluated and logged lazily as it consumed.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Warning :</th><td class="field-body"><p class="first">Use of eager=True requires use of sufficient memory to
hold the entire sequence which is obviously not possible with
infinite sequences.  Use with care!</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A queryable over the unaltered source sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>AttributeError - If logger does not support a debug() method.</li>
<li>ValueError - If the Queryable has been closed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>These examples log to a console logger called <tt class="docutils literal"><span class="pre">clog</span></tt> which can be
created using the following incantation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clog</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&quot;clog&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clog</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clog</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</pre></div>
</div>
<p>By default, <tt class="docutils literal"><span class="pre">log()</span></tt> uses deferred execution, so unless the output
of <tt class="docutils literal"><span class="pre">log()</span></tt> is consumed nothing at all will be logged. In this
example nothing is logged to the console because the result of
<tt class="docutils literal"><span class="pre">log()</span></tt> is never consumed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">)</span>
</pre></div>
</div>
<p>We can easily consume the output of <tt class="docutils literal"><span class="pre">log()</span></tt> by chaining a call to
<tt class="docutils literal"><span class="pre">to_list()</span></tt>. Use the default arguments for <tt class="docutils literal"><span class="pre">log()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : BEGIN (DEFERRED)</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [0] yields 1</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [1] yields 5</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [2] yields 9</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [3] yields 34</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [4] yields 2</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [5] yields 9</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [6] yields 12</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [7] yields 7</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [8] yields 13</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [9] yields 48</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [10] yields 34</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [11] yields 23</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [12] yields 34</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [13] yields 9</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : [14] yields 47</span>
<span class="go">Queryable([1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]) : END (DEFERRED)</span>
<span class="go">[1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]</span>
</pre></div>
</div>
<p>The beginning and end of the sequence are delimited by <tt class="docutils literal"><span class="pre">BEGIN</span></tt> and
<tt class="docutils literal"><span class="pre">END</span></tt> markers which also indicated whether logging is <tt class="docutils literal"><span class="pre">DEFERRED</span></tt>
so items are logged only as they are requested or <tt class="docutils literal"><span class="pre">EAGER</span></tt> where the
whole sequence will be returns immediately.</p>
<p>From left to right the log output shows:</p>
<blockquote>
<div><ol class="arabic simple">
<li>A label, which defaults to the <tt class="docutils literal"><span class="pre">repr()</span></tt> of the Queryable
instance being logged.</li>
<li>In square brackets the zero-based index of the element being
logged.</li>
<li><tt class="docutils literal"><span class="pre">yields</span> <span class="pre">&lt;element&gt;</span></tt> showing the element value</li>
</ol>
</div></blockquote>
<p>Specify a label a more concise label to <tt class="docutils literal"><span class="pre">log()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;query()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">query() : BEGIN (DEFERRED)</span>
<span class="go">query() : [0] yields 1</span>
<span class="go">query() : [1] yields 5</span>
<span class="go">query() : [2] yields 9</span>
<span class="go">query() : [3] yields 34</span>
<span class="go">query() : [4] yields 2</span>
<span class="go">query() : [5] yields 9</span>
<span class="go">query() : [6] yields 12</span>
<span class="go">query() : [7] yields 7</span>
<span class="go">query() : [8] yields 13</span>
<span class="go">query() : [9] yields 48</span>
<span class="go">query() : [10] yields 34</span>
<span class="go">query() : [11] yields 23</span>
<span class="go">query() : [12] yields 34</span>
<span class="go">query() : [13] yields 9</span>
<span class="go">query() : [14] yields 47</span>
<span class="go">query() : END (DEFERRED)</span>
<span class="go">[1, 5, 9, 34, 2, 9, 12, 7, 13, 48, 34, 23, 34, 9, 47]</span>
</pre></div>
</div>
<p>We can show how the default deferred logging produces only required
elements by only consuming the first three elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;query()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">query() : BEGIN (DEFERRED)</span>
<span class="go">query() : [0] yields 1</span>
<span class="go">query() : [1] yields 5</span>
<span class="go">query() : [2] yields 9</span>
<span class="go">[1, 5, 9]</span>
</pre></div>
</div>
<p>However, by setting the <tt class="docutils literal"><span class="pre">eager</span></tt> argument to be True, we can force
logging of the whole sequence immediately:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;query()&#39;</span><span class="p">,</span> <span class="n">eager</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">query() : BEGIN (EAGER)</span>
<span class="go">query() : [0] = 1</span>
<span class="go">query() : [1] = 5</span>
<span class="go">query() : [2] = 9</span>
<span class="go">query() : [3] = 34</span>
<span class="go">query() : [4] = 2</span>
<span class="go">query() : [5] = 9</span>
<span class="go">query() : [6] = 12</span>
<span class="go">query() : [7] = 7</span>
<span class="go">query() : [8] = 13</span>
<span class="go">query() : [9] = 48</span>
<span class="go">query() : [10] = 34</span>
<span class="go">query() : [11] = 23</span>
<span class="go">query() : [12] = 34</span>
<span class="go">query() : [13] = 9</span>
<span class="go">query() : [14] = 47</span>
<span class="go">query() : END (EAGER)</span>
<span class="go">[1, 5, 9]</span>
</pre></div>
</div>
<p>Note that in these cases the output has a different format and that
use of eager logging in no way affects the query result.</p>
<p>If <tt class="docutils literal"><span class="pre">logger</span></tt> is None (or omitted), then logging is disabled
completely:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;query()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 5, 9]</span>
</pre></div>
</div>
<p>Finally, see that <tt class="docutils literal"><span class="pre">log()</span></tt> can be used at multiple points within a
query expression:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;query(numbers)&#39;</span><span class="p">)</span>                   \
<span class="gp">... </span>       <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;squared&#39;</span><span class="p">)</span>     \
<span class="gp">... </span>       <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&quot;over 1000&quot;</span><span class="p">)</span> \
<span class="gp">... </span>       <span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clog</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&quot;take 3&quot;</span><span class="p">)</span>                      \
<span class="gp">... </span>       <span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">take 3 : BEGIN (DEFERRED)</span>
<span class="go">over 1000 : BEGIN (DEFERRED)</span>
<span class="go">squared : BEGIN (DEFERRED)</span>
<span class="go">query(numbers) : BEGIN (DEFERRED)</span>
<span class="go">query(numbers) : [0] yields 1</span>
<span class="go">squared : [0] yields 1</span>
<span class="go">query(numbers) : [1] yields 5</span>
<span class="go">squared : [1] yields 25</span>
<span class="go">query(numbers) : [2] yields 9</span>
<span class="go">squared : [2] yields 81</span>
<span class="go">query(numbers) : [3] yields 34</span>
<span class="go">squared : [3] yields 1156</span>
<span class="go">over 1000 : [0] yields 1156</span>
<span class="go">take 3 : [0] yields 1156</span>
<span class="go">query(numbers) : [4] yields 2</span>
<span class="go">squared : [4] yields 4</span>
<span class="go">query(numbers) : [5] yields 9</span>
<span class="go">squared : [5] yields 81</span>
<span class="go">query(numbers) : [6] yields 12</span>
<span class="go">squared : [6] yields 144</span>
<span class="go">query(numbers) : [7] yields 7</span>
<span class="go">squared : [7] yields 49</span>
<span class="go">query(numbers) : [8] yields 13</span>
<span class="go">squared : [8] yields 169</span>
<span class="go">query(numbers) : [9] yields 48</span>
<span class="go">squared : [9] yields 2304</span>
<span class="go">over 1000 : [1] yields 2304</span>
<span class="go">take 3 : [1] yields 2304</span>
<span class="go">query(numbers) : [10] yields 34</span>
<span class="go">squared : [10] yields 1156</span>
<span class="go">over 1000 : [2] yields 1156</span>
<span class="go">take 3 : [2] yields 1156</span>
<span class="go">take 3 : END (DEFERRED)</span>
<span class="go">[1156, 2304, 1156]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.max">
<tt class="descname">max</tt><big>(</big><em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.max" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the maximum value in a sequence.</p>
<p>All of the source sequence will be consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; An optional single argument function which will be used
to project the elements of the sequence. If omitted, the
identity function is used.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The maximum value of the projected sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>ValueError - If the sequence is empty.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the maximum value from a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">23</span>
</pre></div>
</div>
<p>Return the maximum absolute value from a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">)</span>
<span class="go">45</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.min">
<tt class="descname">min</tt><big>(</big><em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.min" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the minimum value in a sequence.</p>
<p>All of the source sequence will be consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; An optional single argument function which will be used
to project the elements of the sequence. If omitted, the
identity function is used.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The minimum value of the projected sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>ValueError - If the sequence is empty.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the minimum value from a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">-45</span>
</pre></div>
</div>
<p>Return the minimum absolute value from a list of numbers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.of_type">
<tt class="descname">of_type</tt><big>(</big><em>classinfo</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.of_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters elements according to whether they are of a certain type.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>classinfo</strong> &#8211; If classinfo is neither a class object nor a type object
it may be a tuple of class or type objects, or may recursively
contain other such tuples (other sequence types are not
accepted).</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over those elements of the source sequence for which
the predicate is True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If classinfo is not a class, type, or tuple of classes,
types, and such tuples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return all of the strings from a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="s">&quot;seven&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s">&quot;nine&quot;</span><span class="p">,</span> <span class="s">&quot;ten&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">of_type</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[5, 8]</span>
</pre></div>
</div>
<p>Return all the integers and floats from a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="s">&quot;seven&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s">&quot;nine&quot;</span><span class="p">,</span> <span class="s">&quot;ten&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">of_type</span><span class="p">((</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[2.0, 5, 6.0, 8]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.order_by">
<tt class="descname">order_by</tt><big>(</big><em>key_selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts by a key in ascending order.</p>
<p>Introduces a primary sorting order to the sequence. Additional sort
criteria should be specified by subsequent calls to then_by() and
then_by_descending().  Calling order_by() or order_by_descending() on
the results of a call to order_by() will introduce a new primary
ordering which will override any already established ordering.</p>
<p>This method performs a stable sort. The order of two elements with the
same key will be preserved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key_selector</strong> &#8211; A unary function which extracts a key from each
element using which the result will be ordered.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An OrderedQueryable over the sorted elements.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the key_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Sort a list of numbers in ascending order by their own value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[-45, -34, -23, -14, 1, 12, 19, 23, 78, 98]</span>
</pre></div>
</div>
<p>Sort a list of numbers in ascending order by their absolute value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="nb">abs</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 12, -14, 19, 23, -23, -34, -45, 78, 98]</span>
</pre></div>
</div>
<p>See that the relative order of the two elements which compare equal
(23 and -23 in the list shown) are preserved; the sort is stable.</p>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.order_by_descending">
<tt class="descname">order_by_descending</tt><big>(</big><em>key_selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.order_by_descending" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts by a key in descending order.</p>
<p>Introduces a primary sorting order to the sequence. Additional sort
criteria should be specified by subsequent calls to then_by() and
then_by_descending().  Calling order_by() or order_by_descending() on
the results of a call to order_by() will introduce a new primary
ordering which will override any already established ordering.</p>
<p>This method performs a stable sort. The order of two elements with the
same key will be preserved.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key_selector</strong> &#8211; A unary function which extracts a key from each
element using which the result will be ordered.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An OrderedQueryable over the sorted elements.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the key_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Sort a list of numbers in ascending order by their own value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">order_by_descending</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[98, 78, 23, 19, 12, 1, -14, -23, -34, -45]</span>
</pre></div>
</div>
<p>Sort a list of numbers in ascending order by their absolute value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">order_by_descending</span><span class="p">(</span><span class="nb">abs</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[98, 78, -45, -34, 23, -23, 19, -14, 12, 1]</span>
</pre></div>
</div>
<p>See that the relative order of the two elements which compare equal
(23 and -23 in the list shown) are preserved; the sort is stable.</p>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.select">
<tt class="descname">select</tt><big>(</big><em>selector</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms each element of a sequence into a new form.</p>
<p>Each element is transformed through a selector function to produce a
value for each value in the source sequence. The generated sequence is
lazily evaluated.</p>
<p>If the selector is identity the method will return self.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; A unary function mapping a value in the source sequence
to the corresponding value in the generated generated sequence.
The single positional argument to the selector function is the
element value.  The return value of the selector function
should be the corresponding element of the result sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over generated sequence whose elements are the result
of invoking the selector function on each element of the source
sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If this Queryable has been closed.</li>
<li>TypeError - If selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Select the scores from a collection of student records:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">students</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Joe Bloggs&quot;</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mi">54</span><span class="p">),</span>
<span class="gp">... </span>            <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Ola Nordmann&quot;</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mi">61</span><span class="p">),</span>
<span class="gp">... </span>            <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;John Doe&quot;</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mi">51</span><span class="p">),</span>
<span class="gp">... </span>            <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Tom Cobleigh&quot;</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mi">71</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">students</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="s">&#39;score&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[54, 61, 51, 71]</span>
</pre></div>
</div>
<p>Transform a sequence of numbers into it square roots:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1.0, 6.708203932499369, 4.795831523312719, 5.830951894845301,</span>
<span class="go"> 4.358898943540674, 8.831760866327848, 4.795831523312719,</span>
<span class="go"> 3.4641016151377544, 9.899494936611665, 3.7416573867739413]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.select_many">
<tt class="descname">select_many</tt><big>(</big><em>collection_selector=identity</em>, <em>result_selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.select_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Projects each element of a sequence to an intermediate new sequence,
flattens the resulting sequences into one sequence and optionally
transforms the flattened sequence using a selector function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection_selector</strong> &#8211; A unary function mapping each element of the
source iterable into an intermediate sequence. The single
argument of the collection_selector is the value of an element
from the source sequence. The return value should be an
iterable derived from that element value. The default
collection_selector, which is the identity function, assumes
that each element of the source sequence is itself iterable.</li>
<li><strong>result_selector</strong> &#8211; An optional unary function mapping the elements in
the flattened intermediate sequence to corresponding elements
of the result sequence. The single argument of the
result_selector is the value of an element from the flattened
intermediate sequence. The return value should be the
corresponding value in the result sequence. The default
result_selector is the identity function.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over a generated sequence whose elements are the result
of applying the one-to-many collection_selector to each element of
the source sequence, concatenating the results into an intermediate
sequence, and then mapping each of those elements through the
result_selector into the result sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If this Queryable has been closed.</li>
<li>TypeError - If either collection_selector or result_selector are not
callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Select all the words from three sentences by splitting each sentence
into its component words:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="s">&quot;The quick brown fox jumped over the lazy dog&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="s">&quot;Pack my box with five dozen liquor jugs&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="s">&quot;Jackdaws love my big sphinx of quartz&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span><span class="o">.</span><span class="n">select_many</span><span class="p">(</span><span class="k">lambda</span> <span class="n">sentence</span><span class="p">:</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">())</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;The&#39;, &#39;quick&#39;, &#39;brown&#39;, &#39;fox&#39;, &#39;jumped&#39;, &#39;over&#39;, &#39;the&#39;, &#39;lazy&#39;,</span>
<span class="go"> &#39;dog&#39;, &#39;Pack&#39;, &#39;my&#39;, &#39;box&#39;, &#39;with&#39;, &#39;five&#39;, &#39;dozen&#39;, &#39;liquor&#39;,</span>
<span class="go"> &#39;jugs&#39;, &#39;Jackdaws&#39;, &#39;love&#39;, &#39;my&#39;, &#39;big&#39;, &#39;sphinx&#39;, &#39;of&#39;, &#39;quartz&#39;]</span>
</pre></div>
</div>
<p>Select all the words from three sentences and return a list of the
length of each word:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="s">&quot;The quick brown fox jumped over the lazy dog&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="s">&quot;Pack my box with five dozen liquor jugs&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="s">&quot;Jackdaws love my big sphinx of quartz&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span><span class="o">.</span><span class="n">select_many</span><span class="p">(</span><span class="k">lambda</span> <span class="n">sentence</span><span class="p">:</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="nb">len</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[3, 5, 5, 3, 6, 4, 3, 4, 3, 4, 2, 3, 4, 4, 5, 6, 4, 8, 4, 2, 3, 6,</span>
<span class="go"> 2, 6]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.select_many_with_correspondence">
<tt class="descname">select_many_with_correspondence</tt><big>(</big><em>collection_selector=identity</em>, <em>result_selector=lambda source_element</em>, <em>collection_element: (source_element</em>, <em>collection_element))</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.select_many_with_correspondence" title="Permalink to this definition">¶</a></dt>
<dd><p>Projects each element of a sequence to an intermediate new sequence,
and flattens the resulting sequence, into one sequence and uses a
selector function to incorporate the corresponding source for each item
in the result sequence.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection_selector</strong> &#8211; A unary function mapping each element of the
source iterable into an intermediate sequence. The single
argument of the collection_selector is the value of an element
from the source sequence. The return value should be an
iterable derived from that element value. The default
collection_selector, which is the identity function, assumes
that each element of the source sequence is itself iterable.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function mapping the elements in the
flattened intermediate sequence together with their
corresponding source elements to elements of the result
sequence. The two positional arguments of the result_selector
are, first the source element corresponding to an element from
the intermediate sequence, and second the actual element from
the intermediate sequence. The return value should be the
corresponding value in the result sequence. If no
result_selector function is provided, the elements of the
result sequence are 2-tuple pairs of the form (source_element,
intermediate_element).</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over a generated sequence whose elements are the result
of applying the one-to-many collection_selector to each element of
the source sequence, concatenating the results into an intermediate
sequence, and then mapping each of those elements through the
result_selector which incorporates the corresponding source element
into the result sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If this Queryable has been closed.</li>
<li>TypeError - If projector or selector are not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Incorporate each album track with its performing artist into a
descriptive string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">albums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Eagles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;New Kid in Town&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Life in the Fast Lane&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Wasted Time&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Revolver&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Beatles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Taxman&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Eleanor Rigby&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Yellow Submarine&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Doctor Robert&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;Michael Jackson&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Beat It&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Billie Jean&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;The Girl Is Mine&quot;</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">albums</span><span class="p">)</span><span class="o">.</span><span class="n">select_many_with_correspondence</span><span class="p">(</span><span class="k">lambda</span> <span class="n">album</span><span class="p">:</span> <span class="n">album</span><span class="p">[</span><span class="s">&#39;tracks&#39;</span><span class="p">],</span>
<span class="gp">... </span>  <span class="k">lambda</span> <span class="n">album</span><span class="p">,</span> <span class="n">track</span><span class="p">:</span> <span class="n">track</span> <span class="o">+</span> <span class="s">&quot; by &quot;</span> <span class="o">+</span> <span class="n">album</span><span class="p">[</span><span class="s">&#39;artist&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Hotel California by The Eagles&#39;, &#39;New Kid in Town by The Eagles&#39;,</span>
<span class="go"> &#39;Life in the Fast Lane by The Eagles&#39;, &#39;Wasted Time by The Eagles&#39;,</span>
<span class="go"> &#39;Taxman by The Beatles&#39;, &#39;Eleanor Rigby by The Beatles&#39;,</span>
<span class="go"> &#39;Yellow Submarine by The Beatles&#39;, &#39;Doctor Robert by The Beatles&#39;,</span>
<span class="go"> &#39;Thriller by Michael Jackson&#39;, &#39;Beat It by Michael Jackson&#39;,</span>
<span class="go"> &#39;Billie Jean by Michael Jackson&#39;,</span>
<span class="go"> &#39;The Girl Is Mine by Michael Jackson&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.select_many_with_index">
<tt class="descname">select_many_with_index</tt><big>(</big><em>collection_selector=lambda index</em>, <em>source_element: (index</em>, <em>source_element)</em>, <em>result_selector=lambda source_element</em>, <em>collection_element: collection_element</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.select_many_with_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Projects each element of a sequence to an intermediate new sequence,
incorporating the index of the element, flattens the resulting sequence
into one sequence and optionally transforms the flattened sequence
using a selector function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection_selector</strong> &#8211; A binary function mapping each element of the
source sequence into an intermediate sequence, by incorporating
its index in the source sequence. The two positional arguments
to the function are the zero-based index of the source element
and the value of the element.  The result of the function
should be an iterable derived from the index and element value.
If no collection_selector is provided, the elements of the
intermediate  sequence will consist of tuples of (index,
element) from the source sequence.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function mapping the elements in the
flattened intermediate sequence together with their
corresponding source elements to elements of the result
sequence. The two positional arguments of the result_selector
are, first the source element corresponding to an element from
the intermediate sequence, and second the actual element from
the intermediate sequence. The return value should be the
corresponding value in the result sequence. If no
result_selector function is provided, the elements of the
flattened intermediate sequence are returned untransformed.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over a generated sequence whose elements are the result
of applying the one-to-many collection_selector to each element of
the source sequence which incorporates both the index and value of
the source element, concatenating the results into an intermediate
sequence, and then mapping each of those elements through the
result_selector into the result sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If this Queryable has been closed.</li>
<li>TypeError - If projector [and selector] are not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Incorporate the index of each album along with the track and artist
for a digital jukebox. A generator expression is used to combine the
index with the track name when generating the intermediate sequences
from each album which will be concatenated into the final result:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">albums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Eagles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;New Kid in Town&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Life in the Fast Lane&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Wasted Time&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Revolver&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Beatles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Taxman&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Eleanor Rigby&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Yellow Submarine&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Doctor Robert&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;Michael Jackson&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Beat It&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Billie Jean&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;The Girl Is Mine&quot;</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">albums</span><span class="p">)</span><span class="o">.</span><span class="n">select_many_with_index</span><span class="p">(</span><span class="k">lambda</span> <span class="n">index</span><span class="p">,</span> <span class="n">album</span><span class="p">:</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; - &#39;</span> <span class="o">+</span> <span class="n">track</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">album</span><span class="p">[</span><span class="s">&#39;tracks&#39;</span><span class="p">]))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;0 - Hotel California&#39;, &#39;0 - New Kid in Town&#39;,</span>
<span class="go"> &#39;0 - Life in the Fast Lane&#39;, &#39;0 - Wasted Time&#39;, &#39;1 - Taxman&#39;,</span>
<span class="go"> &#39;1 - Eleanor Rigby&#39;, &#39;1 - Yellow Submarine&#39;, &#39;1 - Doctor Robert&#39;,</span>
<span class="go"> &#39;2 - Thriller&#39;, &#39;2 - Beat It&#39;, &#39;2 - Billie Jean&#39;,</span>
<span class="go"> &#39;2 - The Girl Is Mine&#39;]</span>
</pre></div>
</div>
<p>Incorporate the index of each album along with the track and artist
for a digital jukebox. A generator expression is to define the
collection_selector used to combine the index with the track name
when generating the intermediate sequences from each album which will
be concatenated into the final result:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">albums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Eagles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Hotel California&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;New Kid in Town&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Life in the Fast Lane&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Wasted Time&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Revolver&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;The Beatles&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Taxman&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Eleanor Rigby&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Yellow Submarine&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Doctor Robert&quot;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s">&quot;Michael Jackson&quot;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Thriller&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Beat It&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;Billie Jean&quot;</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="s">&quot;The Girl Is Mine&quot;</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">albums</span><span class="p">)</span><span class="o">.</span><span class="n">select_many_with_index</span><span class="p">(</span><span class="n">collection_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">index</span><span class="p">,</span> <span class="n">album</span><span class="p">:</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; - &#39;</span> <span class="o">+</span> <span class="n">track</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">album</span><span class="p">[</span><span class="s">&#39;tracks&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">result_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">album</span><span class="p">,</span> <span class="n">track</span><span class="p">:</span> <span class="n">album</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; - &#39;</span> <span class="o">+</span> <span class="n">track</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;Hotel California - 0 - Hotel California&#39;,</span>
<span class="go"> &#39;Hotel California - 0 - New Kid in Town&#39;,</span>
<span class="go"> &#39;Hotel California - 0 - Life in the Fast Lane&#39;,</span>
<span class="go"> &#39;Hotel California - 0 - Wasted Time&#39;, &#39;Revolver - 1 - Taxman&#39;,</span>
<span class="go"> &#39;Revolver - 1 - Eleanor Rigby&#39;, &#39;Revolver - 1 - Yellow Submarine&#39;,</span>
<span class="go"> &#39;Revolver - 1 - Doctor Robert&#39;, &#39;Thriller - 2 - Thriller&#39;,</span>
<span class="go"> &#39;Thriller - 2 - Beat It&#39;, &#39;Thriller - 2 - Billie Jean&#39;,</span>
<span class="go"> &#39;Thriller - 2 - The Girl Is Mine&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.select_with_index">
<tt class="descname">select_with_index</tt><big>(</big><em>selector=lambda index</em>, <em>element: (index</em>, <em>element</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.select_with_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms each element of a sequence into a new form, incorporating
the index of the element.</p>
<p>Each element is transformed through a selector function which accepts
the element value and its zero-based index in the source sequence. The
generated sequence is lazily evaluated.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>selector</strong> &#8211; A binary function mapping the index of a value in
the source sequence and the element value itself to the
corresponding value in the generated sequence. The two
positional arguments of the selector function are the zero-
based index of the current element and the value of the current
element. The return value should be the corresponding value in
the result sequence. The default selector produces a 2-tuple
containing the index and the element giving this function
similar behaviour to the built-in enumerate().</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable whose elements are the result of invoking the selector
function on each element of the source sequence</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If this Queryable has been closed.</li>
<li>TypeError - If selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Generate a list of 2-tuple pairs consisting of the element index and
the element value using the default selector:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dark_side_of_the_moon</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;Speak to Me&#39;</span><span class="p">,</span> <span class="s">&#39;Breathe&#39;</span><span class="p">,</span> <span class="s">&#39;On the Run&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;Time&#39;</span><span class="p">,</span> <span class="s">&#39;The Great Gig in the Sky&#39;</span><span class="p">,</span> <span class="s">&#39;Money&#39;</span><span class="p">,</span> <span class="s">&#39;Us and Them&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="s">&#39;Any Colour You Like&#39;</span><span class="p">,</span> <span class="s">&#39;Brain Damage&#39;</span><span class="p">,</span> <span class="s">&#39;Eclipse&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">dark_side_of_the_moon</span><span class="p">)</span><span class="o">.</span><span class="n">select_with_index</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[(0, &#39;Speak to Me&#39;), (1, &#39;Breathe&#39;), (2, &#39;On the Run&#39;), (3, &#39;Time&#39;),</span>
<span class="go"> (4, &#39;The Great Gig in the Sky&#39;), (5, &#39;Money&#39;), (6, &#39;Us and Them&#39;),</span>
<span class="go"> (7, &#39;Any Colour You Like&#39;), (8, &#39;Brain Damage&#39;), (9, &#39;Eclipse&#39;)]</span>
</pre></div>
</div>
<p>Generate numbered album tracks using a custom selector:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">dark_side_of_the_moon</span><span class="p">)</span><span class="o">.</span><span class="n">select_with_index</span><span class="p">(</span><span class="k">lambda</span> <span class="n">index</span><span class="p">,</span> <span class="n">track</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;. &#39;</span> <span class="o">+</span> <span class="n">track</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;0. Speak to Me&#39;, &#39;1. Breathe&#39;, &#39;2. On the Run&#39;, &#39;3. Time&#39;,</span>
<span class="go"> &#39;4. The Great Gig in the Sky&#39;, &#39;5. Money&#39;, &#39;6. Us and Them&#39;,</span>
<span class="go"> &#39;7. Any Colour You Like&#39;, &#39;8. Brain Damage&#39;, &#39;9. Eclipse&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.sequence_equal">
<tt class="descname">sequence_equal</tt><big>(</big><em>second_iterable</em>, <em>equality_comparer=operator.eq</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.sequence_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether two sequences are equal by elementwise comparison.</p>
<p>Sequence equality is defined as the two sequences being equal length
and corresponding elements being equal as determined by the equality
comparer.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>second_iterable</strong> &#8211; The sequence which will be compared with the
source sequence.</li>
<li><strong>equality_comparer</strong> &#8211; An optional binary predicate function which is
used to compare corresponding elements. Should return True if
the elements are equal, otherwise False.  The default equality
comparer is operator.eq which calls __eq__ on elements of the
source sequence with the corresponding element of the second
sequence as a parameter.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if the sequences are equal, otherwise False.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If second_iterable is not in fact iterable.</li>
<li>TypeError - If equality_comparer is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Determine whether lists <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt> are equal:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">sequence_equal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Determine whether lists <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt> and equal when absolute values
are compared:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">sequence_equal</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.single">
<tt class="descname">single</tt><big>(</big><em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.single" title="Permalink to this definition">¶</a></dt>
<dd><p>The only element (which satisfies a condition).</p>
<p>If the predicate is omitted or is None this query returns the only
element in the sequence; otherwise, it returns the only element in
the sequence for which the predicate evaluates to True. Exceptions are
raised if there is either no such element or more than one such
element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the only element of the source sequence will
be returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The only element of the sequence if predicate is None, otherwise
the only element for which the predicate returns True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>ValueError - If, when predicate is None the source sequence contains
more than one element.</li>
<li>ValueError - If there are no elements matching the predicate or more
then one element matching the predicate.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the only element in the sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single</span><span class="p">()</span>
<span class="go">5</span>
</pre></div>
</div>
<p>Attempt to get the single element from a sequence with multiple
elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single</span><span class="p">()</span>
<span class="go">ValueError: Sequence for single() contains multiple elements.</span>
</pre></div>
</div>
<p>Return the only element in a sequence meeting a condition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">7</span>
</pre></div>
</div>
<p>Attempt to get the single element from a sequence which meets a
condition when in fact multiple elements do so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">ValueError: Sequence contains more than one value matching single()</span>
<span class="go">predicate.</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.single_or_default">
<tt class="descname">single_or_default</tt><big>(</big><em>default</em>, <em>predicate=None</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.single_or_default" title="Permalink to this definition">¶</a></dt>
<dd><p>The only element (which satisfies a condition) or a default.</p>
<p>If the predicate is omitted or is None this query returns the only
element in the sequence; otherwise, it returns the only element in
the sequence for which the predicate evaluates to True. A default value
is returned if there is no such element. An exception is raised if
there is more than one such element.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> &#8211; The value which will be returned if either the sequence is
empty or there are no elements matching the predicate.</li>
<li><strong>predicate</strong> &#8211; An optional unary predicate function, the only argument
to which is the element. The return value should be True for
matching elements, otherwise False.  If the predicate is
omitted or None the only element of the source sequence will
be returned.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The only element of the sequence if predicate is None, otherwise
the only element for which the predicate returns True. If there are
no such elements the default value will returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>ValueError - If, when predicate is None the source sequence contains
more than one element.</li>
<li>ValueError - If there is more then one element matching the
predicate.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Return the only element in the sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single_or_default</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
<p>Attempt to get the single element from a sequence with <em>multiple</em>
elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single_or_default</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">ValueError: Sequence for single_or_default() contains multiple</span>
<span class="go">elements</span>
</pre></div>
</div>
<p>Attempt to get the single element from a sequence with <em>no</em> elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single_or_default</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
<p>Return the only element in a sequence meeting a condition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single_or_default</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">7</span>
</pre></div>
</div>
<p>Attempt to get the single element from a sequence which meets a
condition when in fact multiple elements do so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">ValueError: Sequence contains more than one value matching</span>
<span class="go">single_or_default() predicate.</span>
</pre></div>
</div>
<p>Attempt to get the single element matching a predicate from a sequence
which contains no matching elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">single_or_default</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.skip">
<tt class="descname">skip</tt><big>(</big><em>count=1</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip the first count contiguous elements of the source sequence.</p>
<p>If the source sequence contains fewer than count elements returns an
empty sequence and does not raise an exception.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>count</strong> &#8211; The number of elements to skip from the beginning of the
sequence. If omitted defaults to one. If count is less than one
the result sequence will be empty.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A Queryable over the elements of source excluding the first count
elements.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable is closed().</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Skip the first element of a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">skip</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[5, 4]</span>
</pre></div>
</div>
<p>Skip the first two elements of a sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.skip_while">
<tt class="descname">skip_while</tt><big>(</big><em>predicate</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.skip_while" title="Permalink to this definition">¶</a></dt>
<dd><p>Omit elements from the start for which a predicate is True.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; A single argument predicate function.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over the sequence of elements beginning with the first
element for which the predicate returns False.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed().</li>
<li>TypeError - If predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Skip while elements start with the letter &#8216;a&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;aardvark&#39;</span><span class="p">,</span> <span class="s">&#39;antelope&#39;</span><span class="p">,</span> <span class="s">&#39;ape&#39;</span><span class="p">,</span> <span class="s">&#39;baboon&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;anaconda&#39;</span><span class="p">,</span> <span class="s">&#39;zebra&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">words</span><span class="p">)</span><span class="o">.</span><span class="n">skip_while</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;baboon&#39;, &#39;cat&#39;, &#39;anaconda&#39;, &#39;zebra&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.sum">
<tt class="descname">sum</tt><big>(</big><em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the arithmetic sum of the values in the sequence..</p>
<p>All of the source sequence will be consumed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>selector</strong> &#8211; An optional single argument function which will be used
to project the elements of the sequence. If omitted, the
identity function is used.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The total value of the projected sequence, or zero for an empty
sequence.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable has been closed.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Compute the sum of a sequence of floats:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.6</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">24.7</span>
</pre></div>
</div>
<p>Compute the sum of the squares of a sequence of integers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="go">385</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.take">
<tt class="descname">take</tt><big>(</big><em>count=1</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.take" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a specified number of elements from the start of a sequence.</p>
<p>If the source sequence contains fewer elements than requested only the
available elements will be returned and no exception will be raised.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>count</strong> &#8211; An optional number of elements to take. The default is one.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">A Queryable over the first count elements of the source sequence,
or the all elements of elements in the source, whichever is fewer.</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body">ValueError - If the Queryable is closed()</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Take one element from the start of a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[9]</span>
</pre></div>
</div>
<p>Take three elements from the start of a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[9, 7, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.take_while">
<tt class="descname">take_while</tt><big>(</big><em>predicate</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.take_while" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns elements from the start while the predicate is True.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; A function returning True or False with which elements
will be tested.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over the elements from the beginning of the source
sequence for which predicate is True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed()</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;aardvark&#39;</span><span class="p">,</span> <span class="s">&#39;antelope&#39;</span><span class="p">,</span> <span class="s">&#39;ape&#39;</span><span class="p">,</span> <span class="s">&#39;baboon&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s">&#39;anaconda&#39;</span><span class="p">,</span> <span class="s">&#39;zebra&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">words</span><span class="p">)</span><span class="o">.</span><span class="n">take_while</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;aardvark&#39;, &#39;antelope&#39;, &#39;ape&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_dictionary">
<tt class="descname">to_dictionary</tt><big>(</big><em>key_selector=identity</em>, <em>value_selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a dictionary from the source sequence.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>ValueError - If duplicate keys are in the projected source sequence.</li>
<li>TypeError - If key_selector is not callable.</li>
<li>TypeError - If value_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Convert to a dictionary using the default key and value selectors:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;aardvark&#39;</span><span class="p">,</span> <span class="s">&#39;baboon&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;dot&#39;</span><span class="p">,</span> <span class="s">&#39;frog&#39;</span><span class="p">,</span> <span class="s">&#39;giraffe&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s">&#39;horse&#39;</span><span class="p">,</span> <span class="s">&#39;iguana&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span><span class="o">.</span><span class="n">to_dictionary</span><span class="p">()</span>
<span class="go">{&#39;horse&#39;: &#39;horse&#39;, &#39;aardvark&#39;: &#39;aardvark&#39;, &#39;frog&#39;: &#39;frog&#39;, &#39;cat&#39;:</span>
<span class="go"> &#39;cat&#39;, &#39;giraffe&#39;: &#39;giraffe&#39;, &#39;baboon&#39;: &#39;baboon&#39;, &#39;dot&#39;: &#39;dot&#39;,</span>
<span class="go"> &#39;iguana&#39;: &#39;iguana&#39;}</span>
</pre></div>
</div>
<p>Convert to a dictionary extracting the first letter as a key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;aardvark&#39;</span><span class="p">,</span> <span class="s">&#39;baboon&#39;</span><span class="p">,</span> <span class="s">&#39;cat&#39;</span><span class="p">,</span> <span class="s">&#39;dot&#39;</span><span class="p">,</span> <span class="s">&#39;frog&#39;</span><span class="p">,</span> <span class="s">&#39;giraffe&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="s">&#39;horse&#39;</span><span class="p">,</span> <span class="s">&#39;iguana&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span><span class="o">.</span><span class="n">to_dictionary</span><span class="p">(</span><span class="n">key_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">{&#39;a&#39;: &#39;aardvark&#39;, &#39;c&#39;: &#39;cat&#39;, &#39;b&#39;: &#39;baboon&#39;, &#39;d&#39;: &#39;dot&#39;, &#39;g&#39;:</span>
<span class="go"> &#39;giraffe&#39;, &#39;f&#39;: &#39;frog&#39;, &#39;i&#39;: &#39;iguana&#39;, &#39;h&#39;: &#39;horse&#39;}</span>
</pre></div>
</div>
<p>Convert to a dictionary extracting the first letter as a key and
converting the value to uppercase:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span><span class="o">.</span><span class="n">to_dictionary</span><span class="p">(</span><span class="n">key_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">value_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
<span class="go">{&#39;a&#39;: &#39;AARDVARK&#39;, &#39;c&#39;: &#39;CAT&#39;, &#39;b&#39;: &#39;BABOON&#39;, &#39;d&#39;: &#39;DOT&#39;, &#39;g&#39;:</span>
<span class="go"> &#39;GIRAFFE&#39;, &#39;f&#39;: &#39;FROG&#39;, &#39;i&#39;: &#39;IGUANA&#39;, &#39;h&#39;: &#39;HORSE&#39;}</span>
</pre></div>
</div>
<p>Attempt to convert a list of fruit to a dictionary using the initial
letter as the key, in the presence of a multiple keys of the same
value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;apple&#39;</span><span class="p">,</span> <span class="s">&#39;apricot&#39;</span><span class="p">,</span> <span class="s">&#39;banana&#39;</span><span class="p">,</span> <span class="s">&#39;cherry&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span><span class="o">.</span><span class="n">to_dictionary</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">ValueError: Duplicate key value &#39;a&#39; in sequence during</span>
<span class="go">to_dictionary()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_list">
<tt class="descname">to_list</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the source sequence to a list.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<p class="rubric">Example</p>
<p>Convert from a tuple into a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 6, 8, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_lookup">
<tt class="descname">to_lookup</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Lookup object, using the provided selector to generate a
key for each item.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<p class="rubric">Examples</p>
<p>Convert to a Lookup using the default key_selector and
value_selector:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">countries</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Austria&#39;</span><span class="p">,</span> <span class="s">&#39;Bahrain&#39;</span><span class="p">,</span> <span class="s">&#39;Canada&#39;</span><span class="p">,</span> <span class="s">&#39;Algeria&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s">&#39;Croatia&#39;</span><span class="p">,</span> <span class="s">&#39;Kuwait&#39;</span><span class="p">,</span> <span class="s">&#39;Angola&#39;</span><span class="p">,</span> <span class="s">&#39;Greece&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Korea&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span><span class="o">.</span><span class="n">to_lookup</span><span class="p">()</span>
<span class="go">Lookup([(&#39;Austria&#39;, &#39;Austria&#39;), (&#39;Bahrain&#39;, &#39;Bahrain&#39;), (&#39;Canada&#39;,</span>
<span class="go">&#39;Canada&#39;), (&#39;Algeria&#39;, &#39;Algeria&#39;), (&#39;Belgium&#39;, &#39;Belgium&#39;),</span>
<span class="go">(&#39;Croatia&#39;, &#39;Croatia&#39;), (&#39;Kuwait&#39;, &#39;Kuwait&#39;), (&#39;Angola&#39;, &#39;Angola&#39;),</span>
<span class="go">(&#39;Greece&#39;, &#39;Greece&#39;), (&#39;Korea&#39;, &#39;Korea&#39;)])</span>
</pre></div>
</div>
<p>Convert to a Lookup, using the initial letter of each country name as
the key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">countries</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Austria&#39;</span><span class="p">,</span> <span class="s">&#39;Bahrain&#39;</span><span class="p">,</span> <span class="s">&#39;Canada&#39;</span><span class="p">,</span> <span class="s">&#39;Algeria&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s">&#39;Croatia&#39;</span><span class="p">,</span> <span class="s">&#39;Kuwait&#39;</span><span class="p">,</span> <span class="s">&#39;Angola&#39;</span><span class="p">,</span> <span class="s">&#39;Greece&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Korea&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span><span class="o">.</span><span class="n">to_lookup</span><span class="p">(</span><span class="n">key_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">Lookup([(&#39;A&#39;, &#39;Austria&#39;), (&#39;A&#39;, &#39;Algeria&#39;), (&#39;A&#39;, &#39;Angola&#39;), (&#39;B&#39;,</span>
<span class="go">&#39;Bahrain&#39;), (&#39;B&#39;, &#39;Belgium&#39;), (&#39;C&#39;, &#39;Canada&#39;), (&#39;C&#39;, &#39;Croatia&#39;),</span>
<span class="go">(&#39;K&#39;, &#39;Kuwait&#39;), (&#39;K&#39;, &#39;Korea&#39;), (&#39;G&#39;, &#39;Greece&#39;)])</span>
</pre></div>
</div>
<p>Convert to a Lookup, using the initial letter of each country name as
the key and the upper case name as the value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">countries</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Austria&#39;</span><span class="p">,</span> <span class="s">&#39;Bahrain&#39;</span><span class="p">,</span> <span class="s">&#39;Canada&#39;</span><span class="p">,</span> <span class="s">&#39;Algeria&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Belgium&#39;</span><span class="p">,</span> <span class="s">&#39;Croatia&#39;</span><span class="p">,</span> <span class="s">&#39;Kuwait&#39;</span><span class="p">,</span> <span class="s">&#39;Angola&#39;</span><span class="p">,</span> <span class="s">&#39;Greece&#39;</span><span class="p">,</span>
<span class="gp">... </span>             <span class="s">&#39;Korea&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span><span class="o">.</span><span class="n">to_lookup</span><span class="p">(</span><span class="n">key_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                       <span class="n">value_selector</span><span class="o">=</span><span class="k">lambda</span> <span class="n">name</span><span class="p">:</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
<span class="go">Lookup([(&#39;A&#39;, &#39;AUSTRIA&#39;), (&#39;A&#39;, &#39;ALGERIA&#39;), (&#39;A&#39;, &#39;ANGOLA&#39;), (&#39;B&#39;,</span>
<span class="go">&#39;BAHRAIN&#39;), (&#39;B&#39;, &#39;BELGIUM&#39;), (&#39;C&#39;, &#39;CANADA&#39;), (&#39;C&#39;, &#39;CROATIA&#39;),</span>
<span class="go">(&#39;K&#39;, &#39;KUWAIT&#39;), (&#39;K&#39;, &#39;KOREA&#39;), (&#39;G&#39;, &#39;GREECE&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_set">
<tt class="descname">to_set</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the source sequence to a set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If duplicate keys are in the projected source sequence.</li>
<li>ValueError - If the Queryable is closed().</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Convert a list to a set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">to_set</span><span class="p">()</span>
<span class="go">{0, 1, 2, 3, 4, 9}</span>
</pre></div>
</div>
<p>Attempt to convert a list containing duplicates to a set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">to_set</span><span class="p">()</span>
<span class="go">ValueError: Duplicate item value 2 in sequence during to_set()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_str">
<tt class="descname">to_str</tt><big>(</big><em>separator</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a string from the source sequence.</p>
<p>The elements of the query result will each coerced to a string and then
the resulting strings concatenated to return a single string. This
allows the natural processing of character sequences as strings. An
optional separator which will be inserted between each item may be
specified.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this method uses immediate execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>separator</strong> &#8211; An optional separator which will be coerced to a string
and inserted between each source item in the resulting string.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A single string which is the result of stringifying each element
and concatenating the results into a single string.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>TypeError - If any element cannot be coerced to a string.</li>
<li>TypeError - If the separator cannot be coerced to a string.</li>
<li>ValueError - If the Queryable is closed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Convert a sequence of characters into a string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;t&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span>
<span class="go">&#39;characters&#39;</span>
</pre></div>
</div>
<p>Concatenate some word fragments into a single string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">syllables</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;pen&#39;</span><span class="p">,</span> <span class="s">&#39;ta&#39;</span><span class="p">,</span> <span class="s">&#39;syll&#39;</span><span class="p">,</span> <span class="s">&#39;ab&#39;</span><span class="p">,</span> <span class="s">&#39;ic&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">syllables</span><span class="p">)</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span>
</pre></div>
</div>
<p>Coerce some integers to strings and concatenate their digits to form
a single string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">72</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">33</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
<span class="go">&#39;72-101-108-108-111-44-32-87-111-114-108-100-33&#39;</span>
</pre></div>
</div>
<p>Coerce some integers to strings and concatenate their values separated
by hyphens to form a single string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">72</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">33</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
<span class="go">&#39;72-101-108-108-111-44-32-87-111-114-108-100-33&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.to_tuple">
<tt class="descname">to_tuple</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.to_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the source sequence to a tuple.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses immediate execution.</p>
</div>
<p class="rubric">Example</p>
<p>Convert from a list into a tuple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">(1, 6, 8, 3, 4)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.union">
<tt class="descname">union</tt><big>(</big><em>second_iterable</em>, <em>selector=identity</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns those elements which are either in the source sequence or in
the second_iterable, or in both.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>second_iterable</strong> &#8211; Elements from this sequence are returns if they
are not also in the source sequence.</li>
<li><strong>selector</strong> &#8211; An optional single argument function which is used to
project the elements in the source and second_iterables prior
to comparing them. If omitted the identity function will be
used.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A sequence containing all elements in the source sequence and second
sequence.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable has been closed.</li>
<li>TypeError - If the second_iterable is not in fact iterable.</li>
<li>TypeError - If the selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Create a list of numbers which are in either or both of two lists:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[1, 6, 9, 3, 2, 7]</span>
</pre></div>
</div>
<p>Create a list of numbers, based on their absolute values, which are in
either or both of list <tt class="docutils literal"><span class="pre">a</span></tt> or list <tt class="docutils literal"><span class="pre">b</span></tt>, preferentially taking
numbers from list <tt class="docutils literal"><span class="pre">a</span></tt> where the absolute value is present in both:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">abs</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[-1, -4, 2, 6, 7, 3, 9]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.where">
<tt class="descname">where</tt><big>(</big><em>predicate</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.where" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters elements according to whether they match a predicate.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>predicate</strong> &#8211; A unary function which is applied to each element in the
source sequence. Source elements for which the predicate
returns True will be present in the result.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over those elements of the source sequence for which
the predicate is True.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If the predicate is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Filter for elements greater than five:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[7, 9]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Queryable.zip">
<tt class="descname">zip</tt><big>(</big><em>second_iterable</em>, <em>result_selector=lambda x</em>, <em>y: (x</em>, <em>y)</em><big>)</big><a class="headerlink" href="#asq.queryables.Queryable.zip" title="Permalink to this definition">¶</a></dt>
<dd><p>Elementwise combination of two sequences.</p>
<p>The source sequence and the second iterable are merged element-by-
element using a function to combine them into the single corresponding
element of the result sequence. The length of the result sequence is
equal to the length of the shorter of the two input sequences.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method uses deferred execution.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>second_iterable</strong> &#8211; The second sequence to be combined with the source
sequence.</li>
<li><strong>result_selector</strong> &#8211; An optional binary function for combining
corresponding elements of the source sequences into an
element of the result sequence. The first and second positional
arguments are the elements from the source sequences. The
result should be the result sequence element. If omitted, the
result sequence will consist of 2-tuple pairs of corresponding
elements from the source sequences.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Queryable over the merged elements.</p>
</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError - If the Queryable is closed.</li>
<li>TypeError - If result_selector is not callable.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Combine two sequences using the default result selector which creates
a 2-tuple pair of corresponding elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[(1, 6), (4, 7), (6, 2), (4, 9), (2, 3), (9, 5), (1, 9)]</span>
</pre></div>
</div>
<p>Multiply the corresponding elements of two sequences to create a new
sequence equal in length to the shorter of the two:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[6, 28, 12, 36, 6, 45, 9]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="asq-queryables-orderedqueryable">
<h2><tt class="docutils literal"><span class="pre">asq.queryables.OrderedQueryable</span></tt><a class="headerlink" href="#asq-queryables-orderedqueryable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="asq.queryables.OrderedQueryable">
<em class="property">class </em><tt class="descclassname">asq.queryables.</tt><tt class="descname">OrderedQueryable</tt><big>(</big><em>iterable</em>, <em>order</em>, <em>func</em><big>)</big><a class="headerlink" href="#asq.queryables.OrderedQueryable" title="Permalink to this definition">¶</a></dt>
<dd><p>A Queryable representing an ordered iterable.</p>
<p>The sorting implemented by this class is an incremental partial sort so
you don&#8217;t pay for sorting results which are never enumerated.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<p>TODO: Document OrderedQueryable</p>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="asq-queryables-lookup">
<h2><tt class="docutils literal"><span class="pre">asq.queryables.Lookup</span></tt><a class="headerlink" href="#asq-queryables-lookup" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="asq.queryables.Lookup">
<em class="property">class </em><tt class="descclassname">asq.queryables.</tt><tt class="descname">Lookup</tt><big>(</big><em>key_value_pairs</em><big>)</big><a class="headerlink" href="#asq.queryables.Lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>A multi-valued dictionary.</p>
<p>A Lookup represents a collection of keys, each one of which is mapped to
one or more values. The keys in the Lookup are maintained in the order in
which they were added. The values for each key are also maintained in
order.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Lookup objects are immutable.</p>
</div>
<p>All standard query operators may be used on a Lookup. When iterated or
used as a Queryable the elements are returned as a sequence of Grouping
objects.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<p class="rubric">Example</p>
<p>Lookup, being a subclass of Queryable supports all of the <tt class="docutils literal"><span class="pre">asq</span></tt> query
operators over a collection of Groupings. For example, to select only
those groups containing two or more elements and then flatten those
groups into a single list, use:</p>
<div class="highlight-python"><pre> &gt;&gt;&gt; key_value_pairs = [('tree', 'oak'),
 ...                    ('bird', 'eagle'),
 ...                    ('bird', 'swallow'),
 ...                    ('tree', 'birch'),
 ...                    ('mammal', 'mouse'),
 ...                    ('tree', 'poplar')]
 ...
 &gt;&gt;&gt; lookup = Lookup(key_value_pairs)
 &gt;&gt;&gt; lookup.where(lambda group: len(group) &gt;= 2).select_many().to_list()
['oak', 'birch', 'poplar', 'eagle', 'swallow']</pre>
</div>
<dl class="method">
<dt id="asq.queryables.Lookup.__init__">
<tt class="descname">__init__</tt><big>(</big><em>key_value_pairs</em><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Lookup with a sequence of (key, value) tuples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key_value_pairs</strong> &#8211; <blockquote>
<div>An iterable over 2-tuples each containing a key, value pair.</div></blockquote>
<p class="rubric">Example</p>
<p>To construct a Lookup from key value pairs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;poplar&#39;</span><span class="p">)]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="asq.queryables.Lookup.__getitem__">
<tt class="descname">__getitem__</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>The sequence corresponding to a given key, or an empty sequence if
there are no values corresponding to that key.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> &#8211; The key of the group to be returned.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The Grouping corresponding to the supplied key.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>To retrieve a Grouping for a given key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;poplar&#39;</span><span class="p">)]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span><span class="p">[</span><span class="s">&#39;tree&#39;</span><span class="p">]</span>
<span class="go">Grouping(key=&#39;tree&#39;)</span>
</pre></div>
</div>
<p>but if no such key exists a Grouping will still be returned, albeit an
empty one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vehicles</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="s">&#39;vehicle&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vehicles</span>
<span class="go">Grouping(key=&#39;vehicle&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">vehicles</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Lookup.__len__">
<tt class="descname">__len__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the len() built-in function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The number of Groupings (keys) in the lookup.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>To determine the number of Groupings in a Lookup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;poplar&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Lookup.__contains__">
<tt class="descname">__contains__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the &#8216;in&#8217; membership operator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> &#8211; The key for which membership will be tested.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the Lookup contains a Grouping for the specified key,
otherwise False.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>To determine whether a Lookup contains a specific Grouping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;poplar&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;tree&#39;</span> <span class="ow">in</span> <span class="n">lookup</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;vehicle&#39;</span> <span class="ow">in</span> <span class="n">lookup</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Lookup.__repr__">
<tt class="descname">__repr__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for the repr() built-in function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">The official string representation of the object.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>To produce a string representation of a Lookup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;poplar&#39;</span><span class="p">)]</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span>
<span class="go">&quot;Lookup([(&#39;tree&#39;, &#39;oak&#39;), (&#39;tree&#39;, &#39;birch&#39;), (&#39;tree&#39;, &#39;poplar&#39;),</span>
<span class="go">(&#39;bird&#39;, &#39;eagle&#39;), (&#39;bird&#39;, &#39;swallow&#39;), (&#39;mammal&#39;, &#39;mouse&#39;)])&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Lookup.apply_result_selector">
<tt class="descname">apply_result_selector</tt><big>(</big><em>selector</em><big>)</big><a class="headerlink" href="#asq.queryables.Lookup.apply_result_selector" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<p>Convert each group to a set using a lambda selector and put the
resulting sets in a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key_value_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;oak&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;eagle&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;bird&#39;</span><span class="p">,</span> <span class="s">&#39;swallow&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;tree&#39;</span><span class="p">,</span> <span class="s">&#39;birch&#39;</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s">&#39;mammal&#39;</span><span class="p">,</span> <span class="s">&#39;mouse&#39;</span><span class="p">),</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span> <span class="o">=</span> <span class="n">Lookup</span><span class="p">(</span><span class="n">key_value_pairs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span><span class="o">.</span><span class="n">apply_result_selector</span><span class="p">(</span><span class="k">lambda</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="n">group</span><span class="p">))</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[set([&#39;poplar&#39;, &#39;oak&#39;, &#39;birch&#39;]), set([&#39;eagle&#39;, &#39;swallow&#39;]),</span>
<span class="go">set([&#39;mouse&#39;])]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="asq-queryables-grouping">
<h2><tt class="docutils literal"><span class="pre">asq.queryables.Grouping</span></tt><a class="headerlink" href="#asq-queryables-grouping" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="class">
<dt id="asq.queryables.Grouping">
<em class="property">class </em><tt class="descclassname">asq.queryables.</tt><tt class="descname">Grouping</tt><big>(</big><em>key</em>, <em>items</em><big>)</big><a class="headerlink" href="#asq.queryables.Grouping" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of objects which share a common key.</p>
<p>All standard query operators may be used on a Grouping.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not intended that clients should directly create Grouping
objects. Instances of this class are retrieved from Lookup objects.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<p class="rubric">Example</p>
<p>Grouping, being a subclass of Queryable, supports all of the <tt class="docutils literal"><span class="pre">asq</span></tt>
query operators. For example, to produce a list of the group items in
upper case:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">)</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="go">[&#39;PEAR&#39;, &#39;APPLE&#39;, &#39;ORANGE&#39;, &#39;BANANA&#39;]</span>
</pre></div>
</div>
<dl class="method">
<dt id="asq.queryables.Grouping.__init__">
<tt class="descname">__init__</tt><big>(</big><em>key</em>, <em>iterable</em><big>)</big><a class="headerlink" href="#asq.queryables.Grouping.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Grouping with a given key and a collection of members.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; The key corresponding to this Grouping</li>
<li><strong>items</strong> &#8211; An iterable collection of the members of the group.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Construct a Grouping from a list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="go">Grouping(key=&#39;fruit&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="asq.queryables.Grouping.key">
<tt class="descname">key</tt><a class="headerlink" href="#asq.queryables.Grouping.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The key common to all elements.</p>
<p class="rubric">Example</p>
<p>To retrieve the key from a Grouping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">key</span>
<span class="go">&#39;fruit&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Grouping.__len__">
<tt class="descname">__len__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Grouping.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of items in the Grouping.</p>
<p class="rubric">Example</p>
<p>To retrieve the number of items in a Grouping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Grouping.__eq__">
<tt class="descname">__eq__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Grouping.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine value equality with another grouping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rhs</strong> &#8211; The object on the right-hand-side of the comparison must
support a property called &#8216;key&#8217; and be iterable.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the keys and sequences are equal, otherwise False.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>To test whether two Groupings are equal in value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">==</span> <span class="n">g2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Grouping.__ne__">
<tt class="descname">__ne__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Grouping.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine value inequality with another grouping.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rhs</strong> &#8211; The object on the right-hand-side of the comparison must
support a property called &#8216;key&#8217; and be iterable.</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if the keys or sequences are not equal, otherwise False.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>To test whether two Groupings are inequal in value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g2</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;cherry&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g1</span> <span class="o">!=</span> <span class="n">g2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="asq.queryables.Grouping.__repr__">
<tt class="descname">__repr__</tt><big>(</big><big>)</big><a class="headerlink" href="#asq.queryables.Grouping.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Example</p>
<p>To create a string representation of the Grouping:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grouping</span><span class="p">(</span><span class="s">&quot;fruit&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;pear&quot;</span><span class="p">,</span> <span class="s">&quot;apple&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;banana&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">Grouping(key=&quot;fruit&quot;, items=[&quot;pear&quot;, &quot;apple&quot;, &quot;orange&quot;, &quot;banana&quot;])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/asq_logo_150.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">asq.queryables</span></tt></a><ul>
<li><a class="reference internal" href="#asq-queryables-queryable"><tt class="docutils literal"><span class="pre">asq.queryables.Queryable</span></tt></a></li>
<li><a class="reference internal" href="#asq-queryables-orderedqueryable"><tt class="docutils literal"><span class="pre">asq.queryables.OrderedQueryable</span></tt></a></li>
<li><a class="reference internal" href="#asq-queryables-lookup"><tt class="docutils literal"><span class="pre">asq.queryables.Lookup</span></tt></a></li>
<li><a class="reference internal" href="#asq-queryables-grouping"><tt class="docutils literal"><span class="pre">asq.queryables.Grouping</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="initiators.html"
                        title="previous chapter"><tt class="docutils literal docutils literal"><span class="pre">asq.initiators</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="selectors.html"
                        title="next chapter"><tt class="docutils literal docutils literal"><span class="pre">asq.selectors</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/queryables.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="selectors.html" title="asq.selectors"
             >next</a> |</li>
        <li class="right" >
          <a href="initiators.html" title="asq.initiators"
             >previous</a> |</li>
        <li><a href="../index.html">asq v1.0 documentation</a> &raquo;</li>
          <li><a href="reference.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Robert Smallshire.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>